<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ATLAS Ø¹ÙØ°Ø±Ù†ÙŠ â€“ Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ø£Ø¹Ø°Ø§Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Ù…ÙˆÙ„Ù‘Ø¯ Ø£Ø¹Ø°Ø§Ø± Ø°ÙƒÙŠ Ùˆ Ù…Ø¶Ø­Ùƒ â€“ Ø¹Ø°Ø± Ù„Ø£ÙŠ Ù…ÙˆÙ‚Ù Ø¨Ø¶ØºØ·Ø© Ø²Ø±." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #020617;
      --bg-soft: #020617;
      --card: #020b1f;
      --accent: #0ea5e9;
      --accent-soft: rgba(56, 189, 248, 0.1);
      --accent-strong: #38bdf8;
      --danger: #f97373;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --border: #1f2933;
      --radius-xl: 18px;
      --radius-lg: 14px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.72);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Tajawal", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0b1120 0, #020617 55%, #000 100%);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 20px 12px 32px;
    }

    .app-shell {
      width: 100%;
      max-width: 1100px;
      background: linear-gradient(135deg, rgba(15,23,42,0.96), rgba(3,7,18,0.98));
      border-radius: 24px;
      border: 1px solid rgba(148,163,184,0.18);
      box-shadow: var(--shadow-soft);
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.4fr);
      overflow: hidden;
      position: relative;
    }

    @media (max-width: 900px) {
      body {
        padding: 12px;
      }
      .app-shell {
        grid-template-columns: 1fr;
      }
    }

    .side-panel {
      padding: 18px 20px;
      border-inline-start: 1px solid rgba(148,163,184,0.12);
      background: radial-gradient(circle at top, rgba(56,189,248,0.2), transparent 55%);
      position: relative;
    }

    .main-panel {
      padding: 18px 20px 22px;
    }

    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #f9fafb 0, #0ea5e9 40%, #0369a1 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0b1120;
      font-weight: 800;
      font-size: 18px;
      box-shadow: 0 0 25px rgba(56,189,248,0.65);
    }

    .brand-meta h1 {
      font-size: 17px;
      margin: 0;
    }

    .brand-meta span {
      font-size: 11px;
      color: var(--muted);
    }

    .badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(15,23,42,0.7);
      border: 1px solid rgba(148,163,184,0.26);
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 12px rgba(34,197,94,0.8);
    }

    .pill-stats {
      margin-top: 8px;
      font-size: 11px;
      color: var(--muted);
    }

    .pill-stats strong {
      color: var(--accent-strong);
    }

    .headline-card {
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at 0 0, rgba(56,189,248,0.2), rgba(15,23,42,1));
      border: 1px solid rgba(56,189,248,0.35);
      font-size: 13px;
      color: #e0f2fe;
    }

    .headline-card span {
      color: #facc15;
    }

    .category-strip {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 12px;
    }

    .chip {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(15,23,42,0.85);
      border: 1px solid rgba(51,65,85,1);
      color: var(--muted);
      cursor: pointer;
      transition: all 0.18s ease;
    }

    .chip.active {
      background: var(--accent-soft);
      color: #e0f2fe;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56,189,248,0.5);
    }

    .chip:hover {
      border-color: var(--accent);
      color: #e5f2ff;
    }

    .excuse-card {
      margin-top: 14px;
      background: linear-gradient(135deg, rgba(15,23,42,0.9), rgba(15,23,42,0.97));
      border-radius: 18px;
      border: 1px solid rgba(30,64,175,0.7);
      padding: 14px 14px 13px;
      box-shadow: 0 18px 40px rgba(15,23,42,0.8);
      position: relative;
      overflow: hidden;
    }

    .excuse-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 6px;
    }

    .excuse-meta-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .excuse-label {
      font-size: 11px;
      color: var(--muted);
    }

    .excuse-category {
      font-size: 13px;
      font-weight: 600;
    }

    .tone-pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(56,189,248,0.1);
      color: #bae6fd;
      border: 1px solid rgba(56,189,248,0.4);
    }

    .excuse-text {
      margin-top: 4px;
      font-size: 15px;
      line-height: 1.7;
      color: #e5e7eb;
      min-height: 70px;
    }

    .meter-wrap {
      margin-top: 10px;
      font-size: 11px;
      color: var(--muted);
    }

    .meter-bar {
      margin-top: 6px;
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid rgba(30,64,175,0.85);
      overflow: hidden;
      position: relative;
    }

    .meter-fill {
      height: 100%;
      width: 40%;
      border-radius: inherit;
      background: linear-gradient(90deg, #facc15, #22c55e, #22c55e);
      box-shadow: 0 0 15px rgba(34,197,94,0.8);
      transition: width 0.2s ease-out;
    }

    .meter-value {
      margin-top: 4px;
      font-size: 11px;
      color: #e5e7eb;
    }

    .meter-value span {
      color: #22c55e;
      font-weight: 600;
    }

    .buttons-row {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    button.btn {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 8px 16px;
      font-family: inherit;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.18s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #0b1120;
      font-weight: 600;
      box-shadow: 0 12px 30px rgba(56,189,248,0.6);
    }

    .btn-primary:hover {
      filter: brightness(1.08);
      transform: translateY(-1px);
      box-shadow: 0 18px 40px rgba(56,189,248,0.75);
    }

    .btn-ghost {
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
      color: var(--muted);
    }

    .btn-ghost:hover {
      border-color: var(--accent);
      color: #e5f2ff;
    }

    .tiny {
      font-size: 11px;
      color: var(--muted);
      margin-top: 8px;
    }

    .side-title {
      font-size: 15px;
      margin: 4px 0 8px;
    }

    .tile {
      background: rgba(15,23,42,0.9);
      border-radius: var(--radius-lg);
      padding: 10px 11px;
      border: 1px solid rgba(30,64,175,0.65);
      margin-bottom: 9px;
      font-size: 12px;
      color: var(--muted);
    }

    .tile strong {
      color: #e5e7eb;
      font-size: 12px;
    }

    .tile h3 {
      margin: 0 0 4px;
      font-size: 13px;
      color: #e5e7eb;
    }

    .counter {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent-strong);
    }

    .footer-note {
      margin-top: 12px;
      font-size: 11px;
      color: var(--muted);
      text-align: center;
      opacity: 0.8;
    }

    .footer-note span {
      color: #38bdf8;
    }

    .floating-orb {
      position: absolute;
      inset-inline-start: -120px;
      bottom: -140px;
      width: 280px;
      height: 280px;
      background: radial-gradient(circle, rgba(56,189,248,0.16), transparent 70%);
      pointer-events: none;
      filter: blur(1px);
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="main-panel">
      <header class="app-header">
        <div class="brand">
          <div class="brand-logo">A</div>
          <div class="brand-meta">
            <h1>ATLAS Ø¹ÙØ°Ø±Ù†ÙŠ</h1>
            <span>Ù…ÙˆÙ„Ù‘Ø¯ Ø£Ø¹Ø°Ø§Ø± Ø±Ø³Ù…ÙŠ â€“ Ù„Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ø¶Ø¹ÙŠÙØ© Ùˆ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…Ø© ğŸ˜…</span>
          </div>
        </div>
        <div>
          <div class="badge">
            <div class="badge-dot"></div>
            <span id="live-status">ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† Â· 24/7</span>
          </div>
          <div class="pill-stats">
            Ø£Ø¹Ø°Ø§Ø± ØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ: <strong id="excuse-count">0</strong>
          </div>
        </div>
      </header>

      <section class="headline-card">
        Ø§Ø¶ØºØ· Ø²Ø± <span>â€œØ§Ø¹Ø°Ø±Ù†ÙŠâ€</span> ÙˆØ§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ùâ€¦  
        Ø³Ù†ØµÙ†Ø¹ Ù„Ùƒ Ø¹Ø°Ø± Ù…Ø±ØªØ¨ + Ù†Ø³Ø¨Ø© Ø§Ø­ØªÙ…Ø§Ù„ ÙŠØµØ¯Ù‚ÙˆÙƒ â€“ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ø£Ùˆ Ø£ÙŠ Ù…ÙƒØ§Ù†.
      </section>

      <div class="category-strip" id="category-strip">
        <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªÙ…Ù„Ø£Ù‡Ø§ Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
      </div>

      <article class="excuse-card">
        <div class="excuse-meta">
          <div class="excuse-meta-left">
            <div class="excuse-label">Ø§Ù„Ù…ÙˆÙ‚Ù Ø§Ù„Ø­Ø§Ù„ÙŠ:</div>
            <div class="excuse-category" id="excuse-category">â€“ Ø§Ø®ØªØ± Ù…ÙˆÙ‚ÙÙƒ Ø£ÙˆÙ„Ø§Ù‹ â€“</div>
          </div>
          <div class="tone-pill" id="tone-pill">Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¹Ø°Ø±: ØºÙŠØ± Ù…Ø­Ø¯Ø¯ Ø¨Ø¹Ø¯</div>
        </div>

        <div class="excuse-text" id="excuse-text">
          Ø§Ø¶ØºØ· â€œØ§Ø¹Ø°Ø±Ù†ÙŠâ€ Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆÙ‚Ù Ùˆ ØªÙˆÙ„ÙŠØ¯ Ø¹Ø°Ø± Ù…Ø­ØªØ±Ù… Ø£Ùˆ ÙÙƒØ§Ù‡ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø²Ø§Ø¬ ğŸ¤
        </div>

        <div class="meter-wrap">
          Ù…Ù‚ÙŠØ§Ø³: Ø§Ø­ØªÙ…Ø§Ù„ ÙŠØµØ¯Ù‚ÙˆÙƒ ğŸ‘‡
          <div class="meter-bar">
            <div class="meter-fill" id="meter-fill"></div>
          </div>
          <div class="meter-value" id="meter-value">
            Ù„Ù… ÙŠØªÙ… Ø§Ù„Ù‚ÙŠØ§Ø³ Ø¨Ø¹Ø¯.
          </div>
        </div>

        <div class="buttons-row">
          <button class="btn btn-primary" id="btn-generate">
            ğŸ” Ø§Ø¹Ø°Ø±Ù†ÙŠ
          </button>
          <button class="btn btn-ghost" id="btn-copy">
            ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¹Ø°Ø±
          </button>
        </div>

        <div class="tiny">
          * Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø³Ø§Ø®Ø± Ù„Ù„Ø¶Ø­Ùƒ ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ ÙÙ‚Ø· â€“ Ù„Ø§ ØªØ³ØªØ¹Ù…Ù„Ù‡ ÙÙŠ Ø£Ø´ÙŠØ§Ø¡ Ù…Ø¤Ø°ÙŠØ© Ø£Ùˆ ÙƒØ°Ø¨ Ø¬Ø§Ø±Ø­.
        </div>
      </article>
    </div>

    <aside class="side-panel">
      <div class="floating-orb"></div>
      <div class="side-title">ÙƒÙŠÙ ØªØ³ØªØ®Ø¯Ù… ATLAS Ø¹ÙØ°Ø±Ù†ÙŠØŸ</div>
      <div class="tile">
        <h3>1. Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ù ğŸ¯</h3>
        Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ: Ù…Ø¯Ø±Ø³Ø©ØŒ Ø´ØºÙ„ØŒ Ø£Ù‡Ù„ØŒ Ø£ØµØ­Ø§Ø¨ØŒ ØªØ£Ø®ÙŠØ±â€¦ Ø£Ùˆ Ø®Ù„ÙŠÙ‡ Ø¹Ù„Ù‰ <strong>â€œÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ùâ€</strong>.
      </div>
      <div class="tile">
        <h3>2. Ø§Ø¶ØºØ· â€œØ§Ø¹Ø°Ø±Ù†ÙŠâ€ Ù…Ø±Ø© Ø£Ùˆ Ø£ÙƒØ«Ø±</h3>
        Ø³Ù†ÙˆÙ„Ù‘Ø¯ Ù„Ùƒ Ø¹Ø°Ø± Ø¬Ø§Ù‡Ø² + Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¹Ø°Ø± (Ù„Ø·ÙŠÙØŒ Ø§Ø­ØªØ±Ø§ÙÙŠØŒ Ø¬Ø§Ù…Ø¯â€¦) Ùˆ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØµØ¯ÙŠÙ‚ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©.
      </div>
      <div class="tile">
        <h3>3. Ø§Ù†Ø³Ø® Ùˆ Ø´Ø§Ø±Ùƒ ğŸ˜ˆ</h3>
        Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± <strong>â€œÙ†Ø³Ø® Ø§Ù„Ø¹Ø°Ø±â€</strong> ÙˆØ§Ø±Ø³Ù„Ù‡ Ù…Ø¹ Ø£ØµØ­Ø§Ø¨Ùƒ â€“ Ø£Ùˆ Ø§Ø³ØªØ¹Ù…Ù„Ù‡ ÙƒØ¥Ù„Ù‡Ø§Ù… ØªÙƒØªØ¨ Ø¹Ø°Ø±Ùƒ Ø¨Ø·Ø±ÙŠÙ‚ØªÙƒ.
      </div>

      <div class="tile">
        <h3>Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø¹Ø°Ø§Ø± Ø¹Ù†Ø¯Ùƒ</h3>
        <div class="counter" id="counter-big">0</div>
        <div style="font-size:11px;color:var(--muted);margin-top:3px;">
          ÙŠØªÙ… Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ (LocalStorage).
        </div>
      </div>

      <div class="footer-note">
        ØµÙ†Ø¹ Ø¨Ø­Ø¨ Ø¨ÙˆØ§Ø³Ø·Ø© <span>ATLAS</span> Â· ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ù…Ù† ØªØ­Ø¨ØŒ  
        ÙˆÙƒÙ„ Ù…Ø§ Ø²Ø§Ø¯Øª Ø§Ù„Ø£Ø¹Ø°Ø§Ø±â€¦ Ø²Ø§Ø¯ Ø§Ù„ÙƒØ§Ø±Ù…Ø§ ğŸ˜…
      </div>
    </aside>
  </div>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¹Ø°Ø§Ø±
    const EXCUSES = {
      all: {
        key: "all",
        label: "ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ù",
        color: "default"
      },
      school: {
        key: "school",
        label: "Ù…Ø¯Ø±Ø³Ø© / Ø¬Ø§Ù…Ø¹Ø©",
        color: "blue"
      },
      work: {
        key: "work",
        label: "Ø´ØºÙ„ / ÙˆØ¸ÙŠÙØ©",
        color: "green"
      },
      family: {
        key: "family",
        label: "Ø£Ù‡Ù„ / Ø¹Ø§Ø¦Ù„Ø©",
        color: "amber"
      },
      friends: {
        key: "friends",
        label: "Ø£ØµØ­Ø§Ø¨ / Ø·Ù„Ø¹Ø§Øª",
        color: "purple"
      },
      late: {
        key: "late",
        label: "ØªØ£Ø®ÙŠØ± Ø¹Ù† Ù…ÙˆØ¹Ø¯",
        color: "rose"
      },
      online: {
        key: "online",
        label: "ÙˆØ§ØªØ³Ø§Ø¨ / Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†",
        color: "cyan"
      }
    };

    const EXCUSE_BANK = {
      school: [
        { tone: "Ù„Ø·ÙŠÙ", text: "ÙƒÙ†Øª ØµØ­ÙŠØ§Ù† Ù…Ù† Ø¨Ø¯Ø±ÙŠ ÙˆØ§Ù„Ù„Ù‡ØŒ Ø¨Ø³ Ø§Ù„Ø¨Ø§Øµ Ù‚Ù„Ø¨ Ø¹Ù„ÙŠÙ†Ø§ ÙØ¬Ø£Ø© Ø®Ø·Ø© Ø§Ù„Ø³ÙŠØ±ØŒ Ø§Ø³ØªÙ†ÙŠØª ÙˆØ§Ø­Ø¯ Ø«Ø§Ù†ÙŠ Ùˆ Ø¶Ø§Ø¹ Ø¹Ù„ÙŠ Ø£ÙˆÙ„ Ø§Ù„Ø­ØµØ©." },
        { tone: "Ø§Ø­ØªØ±Ø§ÙÙŠ", text: "ØµØ§Ø±Øª Ù…Ø¹ÙŠ Ù…Ø´ÙƒÙ„Ø© ØªÙ‚Ù†ÙŠØ© Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆÙ„Ù… Ø£Ø³ØªØ·Ø¹ Ø±ÙØ¹ Ø§Ù„ÙˆØ§Ø¬Ø¨ØŒ Ø±Ø­ Ø£Ø±Ø³Ù„Ù‡ Ù„Ø­Ø¶Ø±ØªÙƒ Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù„ÙŠÙ„Ø© Ù…Ø¹ Ø§Ø¹ØªØ°Ø§Ø± Ø±Ø³Ù…ÙŠ." },
        { tone: "Ø¬Ø§Ù…Ø¯", text: "ÙƒÙ†Øª Ù…Ø®Ù„Øµ ÙƒÙ„ Ø¥Ø´ÙŠ Ù…Ù† Ù…Ø¨Ø§Ø±Ø­ØŒ Ø¨Ø³ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù‚Ø·Ø¹Øª ÙˆØ§Ù„Ù„Ø§Ø¨ØªÙˆØ¨ ÙØµÙ„ ÙˆÙ…Ø§ Ù„Ø­Ù‚Øª Ø£Ø³ØªØ±Ø¬Ø¹ Ø§Ù„ÙØ§ÙŠÙ„ Ù„Ù„Ø£Ø³Ù." },
        { tone: "Ù„Ø·ÙŠÙ", text: "ØªØ¹Ø¨Ø§Ù† Ø´ÙˆÙŠ Ù…Ù† Ù…Ø¨Ø§Ø±Ø­ Ùˆ Ø±Ø§Ø³ÙŠ ÙŠÙˆØ¬Ø¹Ù†ÙŠØŒ Ø®ÙØª Ø£Ø¬ÙŠ Ùˆ Ø£Ø¶Ø§ÙŠÙ‚ Ø­Ø¯Ø§ Ø¨Ø§Ù„ÙƒØ­Ø© ğŸ˜…ØŒ Ø¨ÙƒÙ…Ù„ Ø§Ù„Ø´ØºÙ„ Ù…Ù† Ø§Ù„Ø¨ÙŠØª." },
        { tone: "Ø³Ø§Ø®Ø±", text: "Ø¶Ù…ÙŠØ±ÙŠ ØµØ­ÙŠ Ù…ØªØ£Ø®Ø± Ø¹Ù† Ø§Ù„Ø¹Ø§Ø¯Ø©ØŒ Ù‚Ø§Ù„ÙŠ: Ø§Ø±Ø¬Ø¹ Ù†Ø§Ù… Ù†Øµ Ø³Ø§Ø¹Ø© Ø²ÙŠØ§Ø¯Ø©â€¦ Ùˆ Ù…Ø§ Ù‚ØµÙ‘Ø± ğŸ˜­." }
      ],
      work: [
        { tone: "Ø§Ø­ØªØ±Ø§ÙÙŠ", text: "ÙƒØ§Ù† ÙÙŠ Ø¹Ø·Ù„ Ù…ÙØ§Ø¬Ø¦ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø¹Ù†Ø¯ÙŠØŒ Ø§ØªÙˆØ§ØµÙ„Øª Ù…Ø¹ Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ±Ø¬Ø¹ Ø§Ù„Ø¢Ù†ØŒ Ø±Ø­ Ø£ÙƒÙ…Ù„ Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù…ØªØ£Ø®Ø± Ø§Ù„ÙŠÙˆÙ… Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù…." },
        { tone: "Ù„Ø·ÙŠÙ", text: "Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ÙŠÙˆÙ… ÙƒØ§Ù† Ø¨Ø³Ø¨Ø¨ Ø£Ø²Ù…Ø© Ø³ÙŠØ± ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠØ©ØŒ Ø­Ø§ÙˆÙ„Øª Ø£Ø·Ù„Ø¹ Ø£Ø¨ÙƒØ± Ù…Ù† Ø§Ù„Ø¹Ø§Ø¯Ø© Ø¨Ø³ Ù…Ø§ Ø²Ø¨Ø·Øª Ù…Ø¹ÙŠØŒ Ø¨ÙˆØ¹Ø¯Ùƒ Ù…Ø§ ØªØªÙƒØ±Ø±." },
        { tone: "Ø¬Ø§Ù…Ø¯", text: "ÙƒØ§Ù† ÙÙŠ Ù…ÙˆØ¹Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù…Ø§ Ù‚Ø¯Ø±Øª Ø£Ø£Ø¬Ù„Ù‡ØŒ Ø¨Ø³ Ø±ØªØ¨Øª Ø£Ù…ÙˆØ±ÙŠ Ø¨Ø­ÙŠØ« Ù…Ø§ ÙŠØªØ£Ø«Ø± Ø´ØºÙ„ Ø§Ù„ÙØ±ÙŠÙ‚ Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡." },
        { tone: "Ù‡Ø§Ø¯Ø¦", text: "ØµØ§Ø±Øª Ø¸Ø±ÙˆÙ Ø¹Ø§Ø¦Ù„ÙŠØ© Ø·Ø§Ø±Ø¦Ø©ØŒ Ø­Ø§Ø¨ Ø£Ø·Ù„Ø¹ Ø¨Ø¯Ø±ÙŠ Ø§Ù„ÙŠÙˆÙ… Ùˆ Ø¨Ø¹ÙˆÙ‘Ø¶ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø´ØºÙ„ Ø®Ù„Ø§Ù„ Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¥Ø°Ø§ Ø£Ù…ÙƒÙ†." }
      ],
      family: [
        { tone: "Ù„Ø·ÙŠÙ", text: "Ù…Ø§ ØªØ£Ø®Ø±Øª Ø¹Ù† Ù‚ØµØ¯ ÙˆØ§Ù„Ù„Ù‡ØŒ ÙƒÙ†Øª Ø¹Ù†Ø¯ ØµØ§Ø­Ø¨ÙŠ Ùˆ ØµØ§Ø± Ø¹Ù†Ø¯Ù‡Ù… Ù…ÙˆØ¶ÙˆØ¹ Ø¹Ø§Ø¦Ù„ÙŠ Ù…Ø§ Ù‚Ø¯Ø±Øª Ø£ØªØ±ÙƒÙ‡ ÙˆØ£Ø·Ù„Ø¹ ÙØ¬Ø£Ø©." },
        { tone: "Ù‡Ø§Ø¯Ø¦", text: "ØªØ£Ø®Ø±Øª Ø´ÙˆÙŠ Ø¹Ø§Ù„Ø¨ÙŠØª Ù„Ø£Ù†ÙŠ ÙƒÙ†Øª Ø¨Ø¯ÙˆØ± Ø¹Ù„Ù‰ Ø´ØºÙ„Ø© Ù…Ù‡Ù…Ø© Ø±Ø­ ØªÙÙŠØ¯Ù†Ø§ØŒ Ù…Ø§ Ø­Ø¨ÙŠØª Ø£Ø±Ø¬Ø¹ Ù‚Ø¨Ù„ Ù…Ø§ Ø£Ø®Ù„ØµÙ‡Ø§." },
        { tone: "Ø³Ø§Ø®Ø±", text: "Ø­ÙƒØ§Ù„ÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ ÙØ§Ø¶ÙŠâ€¦ Ø·Ù„Ø¹Øª Ù„Ù‚ÙŠØª ÙƒÙ„ Ø§Ù„Ø­Ø§Ø±Ø© Ø·Ø§Ù„Ø¹Ø© Ù…Ø¹ÙŠ Ø¨Ù†ÙØ³ Ø§Ù„ÙˆÙ‚ØªØŒ ÙØªØ¹Ø·Ù„Ù†Ø§ ÙƒÙ„Ù†Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶ ğŸ˜‚." }
      ],
      friends: [
        { tone: "Ù„Ø·ÙŠÙ", text: "ÙˆØ§Ù„Ù„Ù‡ ÙƒÙ†Øª Ù†Ø§ÙˆÙŠ Ø£Ø·Ù„Ø¹ Ù…Ø¹ÙƒÙ…ØŒ Ø¨Ø³ Ø§Ù„Ø£Ù‡Ù„ Ù…Ø³ÙƒÙˆÙ†ÙŠ Ø¹Ù„Ù‰ ØºÙÙ„Ø© ÙˆØ·Ù„Ø¹ Ø¹Ù†Ø¯Ù†Ø§ Ø¶ÙŠÙˆÙ ÙØ¬Ø£Ø©." },
        { tone: "Ø³Ø§Ø®Ø±", text: "ØµØ§Ø± Ø¨ÙŠÙ†ÙŠ ÙˆØ¨ÙŠÙ† Ø§Ù„Ø³Ø±ÙŠØ± Ø¹Ù„Ø§Ù‚Ø© Ø±Ø³Ù…ÙŠØ©ØŒ Ø­Ø§ÙˆÙ„Øª Ø£Ù†ÙØµÙ„ Ø¨Ø³ Ù…Ø§ Ø²Ø¨Ø· Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ÙŠÙˆÙ… ğŸ˜´." },
        { tone: "Ø¬Ø§Ù…Ø¯", text: "ØµØ±Ø§Ø­Ø© Ù…Ø­ØªØ§Ø¬ Ø£Ø±ØªØ¨ Ø´ØºÙ„Ø§Øª Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…ØŒ Ù…Ø§ Ø¨Ø¯ÙŠ Ø£Ø·Ù„Ø¹ ÙˆØ£Ù†Ø§ Ù…Ø´ØºÙˆÙ„ Ø§Ù„ØªÙÙƒÙŠØ± ÙˆÙ…Ø§ Ø£Ø³ØªÙ…ØªØ¹ Ù…Ø¹ÙƒÙ…." }
      ],
      late: [
        { tone: "Ù„Ø·ÙŠÙ", text: "Ø¢Ø³Ù Ø¬Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØªØ£Ø®ÙŠØ±ØŒ Ø§Ù„Ø·Ø±ÙŠÙ‚ ÙƒØ§Ù† Ù…Ø²Ø¯Ø­Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ùˆ Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆÙ…Ø§ Ø­Ø¨ÙŠØª Ø£Ø¨Ø¹Ø«Ù„Ùƒ ÙƒÙ„ Ø®Ù…Ø³ Ø¯Ù‚Ø§Ø¦Ù‚ Ø£ÙƒØªØ¨ 'Ù„Ø³Ø§ ÙÙŠ Ø£Ø²Ù…Ø©'." },
        { tone: "Ø§Ø­ØªØ±Ø§ÙÙŠ", text: "ØªØ£Ø®Ø±Øª Ø¹Ù† Ø§Ù„Ù…ÙˆØ¹Ø¯ Ù„Ø£Ù† Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù„ÙŠ Ø§Ø¹ØªÙ…Ø¯Øª Ø¹Ù„ÙŠÙ‡ ÙƒØ§Ù† Ù…ØºÙ„Ù‚ØŒ Ø§Ø¶Ø·Ø±Ù‘ÙŠØª Ø£ØºÙŠÙ‘Ø± Ø§Ù„Ø®Ø·Ø© Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚." },
        { tone: "Ø³Ø§Ø®Ø±", text: "Ø§Ù„ÙˆÙ‚Øª Ø±ÙƒØ¶ ÙˆØ£Ù†Ø§ Ø±ÙƒØ¶Øª ÙˆØ±Ø§Ù‡ØŒ Ø¨Ø³ ÙˆØ§Ø¶Ø­ Ø¥Ù†Ù‡ Ø£Ø³Ø±Ø¹ Ù…Ù†ÙŠ Ø§Ù„ÙŠÙˆÙ… ğŸ˜‚." }
      ],
      online: [
        { tone: "Ù„Ø·ÙŠÙ", text: "Ø´ÙØª Ø±Ø³Ø§Ù„ØªÙƒ ÙˆÙƒÙ†Øª Ù†Ø§ÙˆÙŠ Ø£Ø±Ø¯ Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø¨Ø³ Ø§Ù†Ø´ØºÙ„Øª Ø¨Ù…ÙˆØ¶ÙˆØ¹ Ø¶Ø±ÙˆØ±ÙŠ ÙˆÙ‚Ù„Øª Ø£Ø±Ø¯ ÙˆØ£Ù†Ø§ ÙØ§Ø¶ÙŠ Ø£Ø­ÙƒÙŠ Ù…Ø¹Ùƒ Ø¨Ø±Ø§Ø­Ø©." },
        { tone: "Ù‡Ø§Ø¯Ø¦", text: "ÙƒÙ†Øª Ø­Ø§Ø· Ø§Ù„Ø¬ÙˆØ§Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØµØ§Ù…Øª ÙˆÙ…Ø§ Ø§Ù†ØªØ¨Ù‡Øª Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ØŒ Ø£ÙˆÙ„ Ù…Ø§ Ø´ÙØª Ø±Ø³Ø§Ù„ØªÙƒ Ø±Ø¬Ø¹ØªÙ„Ùƒ." },
        { tone: "Ø³Ø§Ø®Ø±", text: "Ø¯Ø®Ù„Øª Ø£ÙØªØ­ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ø¨Ø¹Ø¯Ù‡Ø§ Ø¯Ø®Ù„Øª Ø¹Ø§Ù„Ù… Ø§Ù„Ø±ÙŠÙ„Ø²â€¦ ÙˆØ·Ù„Ø¹Øª Ø¨Ø¹Ø¯ Ù£ Ø³Ø§Ø¹Ø§Øª Ø¨Ø¯ÙˆÙ† Ù…Ø§ Ø£Ø­Ø³ ğŸ˜­." }
      ]
    };

    const TONES = [
      { label: "Ù„Ø·ÙŠÙ", emoji: "ğŸ«¶" },
      { label: "Ø§Ø­ØªØ±Ø§ÙÙŠ", emoji: "ğŸ“„" },
      { label: "Ø¬Ø§Ù…Ø¯", emoji: "ğŸ˜" },
      { label: "Ø³Ø§Ø®Ø±", emoji: "ğŸ˜‚" },
      { label: "Ù‡Ø§Ø¯Ø¦", emoji: "ğŸŒ™" }
    ];

    let activeCategory = "all";

    const excuseCategoryEl = document.getElementById("excuse-category");
    const excuseTextEl = document.getElementById("excuse-text");
    const tonePillEl = document.getElementById("tone-pill");
    const meterFillEl = document.getElementById("meter-fill");
    const meterValueEl = document.getElementById("meter-value");
    const countEl = document.getElementById("excuse-count");
    const counterBigEl = document.getElementById("counter-big");

    const btnGenerate = document.getElementById("btn-generate");
    const btnCopy = document.getElementById("btn-copy");
    const categoryStrip = document.getElementById("category-strip");

    function loadCount() {
      const n = parseInt(localStorage.getItem("atlas_excuse_count") || "0", 10);
      countEl.textContent = n;
      counterBigEl.textContent = n;
    }

    function incrementCount() {
      let n = parseInt(localStorage.getItem("atlas_excuse_count") || "0", 10);
      n++;
      localStorage.setItem("atlas_excuse_count", String(n));
      countEl.textContent = n;
      counterBigEl.textContent = n;
    }

    function getRandom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function buildCategoryChips() {
      Object.values(EXCUSES).forEach(cat => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "chip" + (cat.key === "all" ? " active" : "");
        btn.dataset.key = cat.key;
        btn.textContent = cat.label;
        btn.addEventListener("click", () => {
          activeCategory = cat.key;
          document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
          btn.classList.add("active");
          if (cat.key === "all") {
            excuseCategoryEl.textContent = "ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ù â€“ Ø®Ù„ÙŠÙ‡ Ø¹Ù„Ù‰ Ù…Ø²Ø§Ø¬ Ø¹Ø´ÙˆØ§Ø¦ÙŠ";
          } else {
            excuseCategoryEl.textContent = cat.label;
          }
        });
        categoryStrip.appendChild(btn);
      });
    }

    function generateExcuse() {
      let categoryKey = activeCategory;
      if (categoryKey === "all") {
        const keys = Object.keys(EXCUSE_BANK);
        categoryKey = getRandom(keys);
      }

      const bank = EXCUSE_BANK[categoryKey];
      if (!bank || !bank.length) {
        excuseTextEl.textContent = "ØµØ§Ø± ÙÙŠ Ø®Ø·Ø£ Ø¨Ø³ÙŠØ·ØŒ Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© ğŸ™ˆ";
        return;
      }

      const excuse = getRandom(bank);
      const randomTone = getRandom(TONES);

      excuseCategoryEl.textContent = EXCUSES[categoryKey].label;
      excuseTextEl.textContent = excuse.text;

      const toneLabel = excuse.tone || randomTone.label;
      const toneEmoji = randomTone.emoji;
      tonePillEl.textContent = `Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¹Ø°Ø±: ${toneLabel} ${toneEmoji}`;

      const trust = Math.floor(Math.random() * 61) + 25;
      meterFillEl.style.width = `${trust}%`;
      let verdict = "Ù…Ù…ÙƒÙ† ÙŠØµØ¯Ù‚ÙˆÙƒ Ø¨Ù†Ø³Ø¨Ø© Ù…ØªÙˆØ³Ø·Ø©.";
      if (trust < 40) verdict = "Ø§Ø­ØªÙ…Ø§Ù„ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ù‹Ø§â€¦ Ø¬Ù‡Ø² Ø®Ø·Ø© Ø¨Ø¯ÙŠÙ„Ø© ğŸ˜‚";
      else if (trust > 80) verdict = "Ø¹Ø°Ø± Ù†Ø¸ÙŠÙâ€¦ ÙØ±ØµØ© Ø§Ù„ØªØµØ¯ÙŠÙ‚ Ø¹Ø§Ù„ÙŠØ© ğŸ”¥";
      else if (trust > 60) verdict = "Ø¹Ø°Ø± Ù…Ù†Ø·Ù‚ÙŠâ€¦ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ø²Ø§Ø¬ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ ğŸ™‚";

      meterValueEl.innerHTML = `ØªÙ‚Ø¯ÙŠØ±Ù†Ø§: <span>${trust}%</span> â€“ ${verdict}`;

      incrementCount();
    }

    function copyExcuse() {
      const text = excuseTextEl.textContent.trim();
      if (!text || text.startsWith("Ø§Ø¶ØºØ·")) {
        alert("ÙˆÙ„Ù‘Ø§ Ø¹Ø°Ø± Ø£ÙˆÙ„Ø§Ù‹â€¦ Ø§Ø¶ØºØ· Ø²Ø± 'Ø§Ø¹Ø°Ø±Ù†ÙŠ' ğŸ˜‰");
        return;
      }
      navigator.clipboard.writeText(text).then(() => {
        btnCopy.textContent = "âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®";
        setTimeout(() => (btnCopy.textContent = "ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¹Ø°Ø±"), 1200);
      }).catch(() => {
        alert("Ù…Ø§ Ù‚Ø¯Ø±Ù†Ø§ Ù†Ù†Ø³Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ØŒ Ø§Ù†Ø³Ø® ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù„Ùˆ Ø³Ù…Ø­Øª ğŸ™");
      });
    }

    btnGenerate.addEventListener("click", generateExcuse);
    btnCopy.addEventListener("click", copyExcuse);

    buildCategoryChips();
    loadCount();
  </script>
</body>
</html>
