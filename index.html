<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ATLAS Workspace â€“ Ù…Ø³Ø§Ø­Ø© Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</title>

  <!-- Ø®Ø·ÙˆØ· Ø¹Ø±Ø¨ÙŠØ© ÙˆØ¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¨Ø³ÙŠØ·Ø© -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: "Cairo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text-main);
      line-height: 1.6;
      transition: background 0.3s ease, color 0.3s ease;
    }

    /* Ø§Ù„Ø«ÙŠÙ…Ø§Øª */
    body.theme-dark {
      --bg: #020617;
      --bg-soft: #020617;
      --card: #020617;
      --card-soft: #020617;
      --border-subtle: #1e293b;
      --accent: #0ea5e9;
      --accent-soft: rgba(14,165,233,0.1);
      --accent-strong: #0284c7;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --danger: #f97373;
    }

    body.theme-light {
      --bg: #f3f4f6;
      --bg-soft: #e5e7eb;
      --card: #ffffff;
      --card-soft: #f9fafb;
      --border-subtle: #d1d5db;
      --accent: #2563eb;
      --accent-soft: rgba(37,99,235,0.08);
      --accent-strong: #1d4ed8;
      --text-main: #111827;
      --text-soft: #6b7280;
      --danger: #dc2626;
    }

    body.theme-oled {
      --bg: #000000;
      --bg-soft: #020617;
      --card: #020617;
      --card-soft: #020617;
      --border-subtle: #111827;
      --accent: #22d3ee;
      --accent-soft: rgba(34,211,238,0.12);
      --accent-strong: #06b6d4;
      --text-main: #f9fafb;
      --text-soft: #9ca3af;
      --danger: #fb7185;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .app-shell {
      min-height: 100vh;
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 12px 32px;
    }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(14,165,233,0.25), rgba(79,70,229,0.25));
      border: 1px solid rgba(148,163,184,0.4);
      box-shadow: 0 18px 45px rgba(15,23,42,0.7);
      margin-bottom: 20px;
      backdrop-filter: blur(16px);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-avatar {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 20% 0%, #22d3ee, #0f172a);
      color: #e5faff;
      font-weight: 700;
      font-size: 18px;
    }

    .brand-text-title {
      font-size: 18px;
      font-weight: 700;
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .pill {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(15,23,42,0.65);
      padding: 4px 8px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: #e5e7eb;
    }

    .select {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
      padding: 4px 10px;
      font-size: 12px;
      outline: none;
      cursor: pointer;
    }

    .ghost-btn {
      border-radius: 999px;
      border: 1px solid rgba(248,113,113,0.6);
      background: rgba(127,29,29,0.08);
      color: #fecaca;
      padding: 4px 12px;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease;
    }

    .ghost-btn:hover {
      background: rgba(248,113,113,0.18);
      transform: translateY(-1px);
    }

    /* Ø§Ù„Ù„ÙŠØ§ÙˆØª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
    .main-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
      gap: 18px;
    }

    @media (max-width: 900px) {
      .main-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at 0 0, rgba(148,163,184,0.25), rgba(15,23,42,0.98));
      border-radius: 18px;
      padding: 14px 14px 16px;
      border: 1px solid rgba(30,64,175,0.4);
      box-shadow: 0 18px 45px rgba(15,23,42,0.9);
      position: relative;
      overflow: hidden;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border-radius: 999px;
      padding: 2px 8px;
      font-size: 10px;
      background: rgba(15,23,42,0.8);
      border: 1px solid rgba(148,163,184,0.6);
      color: #e5e7eb;
    }

    /* ÙƒØ±Øª Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
    .greeting-main {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    .greeting-line {
      font-size: 20px;
      font-weight: 700;
    }

    .greeting-name {
      color: var(--accent);
    }

    .greeting-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
      color: var(--text-soft);
      align-items: center;
      margin-top: 4px;
    }

    .greeting-meta span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    /* Ø§Ù„ÙˆØ¯Ø¬Ø§Øª */
    .widgets-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }

    .widget {
      background: rgba(15,23,42,0.85);
      border-radius: 14px;
      border: 1px solid var(--border-subtle);
      padding: 10px 10px 12px;
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .widget-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .widget-title {
      display: flex;
      align-items: center;
      gap: 4px;
      font-weight: 600;
      font-size: 11px;
    }

    .widget-body {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      overflow: hidden;
      border: 1px solid rgba(15,118,110,0.7);
    }

    .progress-bar-fill {
      height: 100%;
      width: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, #22c55e, #a3e635);
      transition: width 0.2s ease;
    }

    .widget-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .small-btn {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
      padding: 2px 8px;
      font-size: 11px;
      cursor: pointer;
      min-width: 30px;
      text-align: center;
    }

    .small-btn:hover {
      background: rgba(30,64,175,0.8);
      border-color: rgba(96,165,250,0.8);
    }

    .small-input {
      width: 70px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
      padding: 2px 8px;
      font-size: 11px;
      outline: none;
      text-align: center;
    }

    .prayer-list {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      font-size: 10px;
    }

    .prayer-chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border-radius: 999px;
      padding: 1px 6px;
      background: rgba(15,23,42,0.9);
      border: 1px solid var(--border-subtle);
    }

    .prayer-chip input {
      accent-color: var(--accent);
    }

    .switch-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      font-size: 11px;
    }

    /* Ø§Ù„Ù†ÙˆØªØ§Øª */
    .notes-card {
      background: radial-gradient(circle at 100% 0, rgba(56,189,248,0.22), rgba(15,23,42,0.97));
    }

    .notes-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin: 6px 0 8px;
    }

    .notes-header-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .notes-header-title {
      font-size: 16px;
      font-weight: 700;
    }

    .notes-header-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .primary-btn {
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: white;
      padding: 6px 14px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(15,23,42,0.7);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .primary-btn:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    .notes-grid {
      margin-top: 6px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
      gap: 10px;
    }

    .note-card {
      background: var(--card-soft);
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.8);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 140px;
    }

    .note-cover {
      height: 70px;
      background-size: cover;
      background-position: center;
    }

    .note-body {
      padding: 8px 10px 6px;
      flex: 1;
    }

    .note-title {
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .note-content {
      font-size: 11px;
      color: var(--text-soft);
      max-height: 90px;
      overflow: hidden;
    }

    .note-actions {
      display: flex;
      justify-content: space-between;
      gap: 4px;
      padding: 4px 7px 8px;
    }

    .note-actions button {
      flex: 1;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
      font-size: 11px;
      padding: 2px 0;
      cursor: pointer;
    }

    .note-actions button:hover {
      background: rgba(37,99,235,0.9);
      border-color: rgba(96,165,250,0.9);
    }

    .note-actions button:nth-child(2):hover {
      background: rgba(220,38,38,0.9);
      border-color: rgba(248,113,113,0.95);
    }

    .empty-text {
      font-size: 12px;
      color: var(--text-soft);
      padding-top: 10px;
    }

    /* ÙƒØ±Øª Ø§Ù„Ø£ÙÙƒØ§Ø± */
    .gallery-card {
      margin-top: 14px;
      background: radial-gradient(circle at 0 0, rgba(251,191,36,0.22), rgba(15,23,42,0.96));
    }

    .gallery-list {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-soft);
      display: grid;
      gap: 4px;
    }

    .gallery-list li {
      margin-right: 14px;
    }

    /* Ø§Ù„ÙÙˆØªØ± */
    .footer {
      margin-top: 18px;
      font-size: 11px;
      color: var(--text-soft);
      text-align: center;
    }

    .footer strong {
      color: var(--accent);
    }

    /* Ø§Ù„Ø£ÙˆÙØ±Ù„Ø§ÙŠ (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ + Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù†ÙˆØªØ§Øª) */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.78);
      backdrop-filter: blur(14px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }

    .overlay.hidden {
      display: none;
    }

    .login-card, .modal-card {
      width: 100%;
      max-width: 380px;
      background: radial-gradient(circle at 50% 0, rgba(56,189,248,0.22), rgba(15,23,42,0.97));
      border-radius: 18px;
      padding: 16px 18px 18px;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    }

    .login-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .login-sub {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 10px;
    }

    .form-group {
      margin-bottom: 10px;
      font-size: 12px;
    }

    .form-label {
      display: block;
      margin-bottom: 3px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.95);
      color: var(--text-main);
      padding: 7px 9px;
      font-size: 12px;
      outline: none;
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 8px;
    }

    .secondary-btn {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.95);
      color: var(--text-main);
      padding: 5px 14px;
      font-size: 12px;
      cursor: pointer;
    }

    .secondary-btn:hover {
      background: rgba(30,64,175,0.9);
      border-color: rgba(96,165,250,0.9);
    }

    .login-helper {
      margin-top: 6px;
      font-size: 10px;
      color: var(--text-soft);
    }

    @media (max-width: 600px) {
      .topbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        border-radius: 16px;
      }

      .topbar-right {
        width: 100%;
        justify-content: space-between;
      }
    }
  </style>
</head>
<body class="theme-dark">
  <div class="app-shell">
    <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ -->
    <header class="topbar">
      <div class="brand">
        <div class="brand-avatar">A</div>
        <div>
          <div class="brand-text-title">ATLAS Workspace</div>
          <div class="brand-text-sub">Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„ØªÙ†Ø¸ÙŠÙ… Ø­ÙŠØ§ØªÙƒ â€“ Ù…Ù† ØµÙ†Ø¹ Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ</div>
        </div>
      </div>
      <div class="topbar-right">
        <div class="pill">
          <span>ÙˆØ¶Ø¹:</span>
          <select id="theme-select" class="select">
            <option value="dark">Ø¯Ø§ÙƒÙ†</option>
            <option value="light">ÙØ§ØªØ­</option>
            <option value="oled">Ø£Ø³ÙˆØ¯ OLED</option>
          </select>
        </div>
        <button id="logout-btn" class="ghost-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      </div>
    </header>

    <main class="main-layout">
      <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠØ³Ø±: ØªØ­ÙŠØ© + ÙˆØ¯Ø¬Ø§Øª -->
      <section>
        <article class="card">
          <header class="card-header">
            <div>
              <div class="card-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹</div>
              <div class="card-sub">Ù‡Ø°Ù‡ Ù…Ø³Ø§Ø­Ø© Ø´Ø®ØµÙŠØ© ÙŠÙˆÙ…ÙŠØ© ØªØ­ØªÙØ¸ Ø¨ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ®ØµÙƒ ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯.</div>
            </div>
            <div class="badge">
              <span style="width:7px;height:7px;border-radius:50%;background:#22c55e;"></span>
              <span id="status-text">ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†</span>
            </div>
          </header>

          <div class="greeting-main">
            <div class="greeting-line">
              <span id="greeting-text">ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±</span>
              <span class="greeting-name" id="greeting-name">Ø¶ÙŠÙ</span> â˜•
            </div>
            <div class="greeting-meta">
              <span id="today-date"></span>
              <span>â€¢</span>
              <span>ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ø­ÙÙˆØ¸ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²ÙƒØŒ Ø¨Ø¯ÙˆÙ† Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¹Ù‚Ø¯Ø©.</span>
            </div>
          </div>

          <!-- ÙˆØ¯Ø¬Ø§Øª -->
          <div class="widgets-grid">
            <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø§Ø¡ -->
            <div class="widget">
              <div class="widget-header">
                <div class="widget-title">ğŸ’§ Ù…ÙŠØ§Ù‡</div>
                <div style="font-size:10px;color:var(--text-soft);">
                  <span id="water-percent">0%</span> Ù…Ù† Ù‡Ø¯ÙÙƒ
                </div>
              </div>
              <div class="widget-body">
                <div class="progress-bar">
                  <div id="water-bar-fill" class="progress-bar-fill"></div>
                </div>
                <div class="widget-row">
                  <span style="font-size:11px;">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙƒÙˆØ§Ø¨ Ø§Ù„ÙŠÙˆÙ…:</span>
                  <strong id="water-count">0</strong>
                </div>
                <div class="widget-row">
                  <button id="water-minus" class="small-btn">â€“</button>
                  <button id="water-plus" class="small-btn">+</button>
                </div>
              </div>
            </div>

            <!-- Ø§Ù„Ù†ÙˆÙ… -->
            <div class="widget">
              <div class="widget-header">
                <div class="widget-title">ğŸ˜´ Ù†ÙˆÙ…</div>
                <div style="font-size:10px;color:var(--text-soft);">Ø¢Ø®Ø± Ù„ÙŠÙ„Ø©</div>
              </div>
              <div class="widget-body">
                <div class="widget-row">
                  <span style="font-size:11px;">Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª:</span>
                  <input id="sleep-hours" type="number" min="0" max="24" step="0.5" class="small-input" />
                </div>
                <div id="sleep-label" style="font-size:10px;color:var(--text-soft);">
                  Ù„Ù… ØªØ³Ø¬Ù‘Ù„ Ù†ÙˆÙ…Ùƒ Ø¨Ø¹Ø¯
                </div>
              </div>
            </div>

            <!-- Ø§Ù„ØµÙ„Ø§Ø© -->
            <div class="widget">
              <div class="widget-header">
                <div class="widget-title">ğŸ•Œ ØµÙ„Ø§Ø©</div>
                <div id="prayer-summary" style="font-size:10px;color:var(--text-soft);">0 / 5 ØµÙ„ÙˆØ§Øª</div>
              </div>
              <div class="widget-body">
                <div class="prayer-list">
                  <label class="prayer-chip">
                    <input type="checkbox" data-prayer="fajr" /> ÙØ¬Ø±
                  </label>
                  <label class="prayer-chip">
                    <input type="checkbox" data-prayer="dhuhr" /> Ø¸Ù‡Ø±
                  </label>
                  <label class="prayer-chip">
                    <input type="checkbox" data-prayer="asr" /> Ø¹ØµØ±
                  </label>
                  <label class="prayer-chip">
                    <input type="checkbox" data-prayer="maghrib" /> Ù…ØºØ±Ø¨
                  </label>
                  <label class="prayer-chip">
                    <input type="checkbox" data-prayer="isha" /> Ø¹Ø´Ø§Ø¡
                  </label>
                </div>
              </div>
            </div>

            <!-- Ø§Ù„Ø¬ÙŠÙ… -->
            <div class="widget">
              <div class="widget-header">
                <div class="widget-title">ğŸ‹ï¸ Ø¬ÙŠÙ… / Ø­Ø±ÙƒØ©</div>
                <div style="font-size:10px;color:var(--text-soft);">Ø§Ù„ÙŠÙˆÙ…</div>
              </div>
              <div class="widget-body">
                <div class="switch-row">
                  <span id="gym-label">Ù„Ù… ØªØ³Ø¬Ù‘Ù„ ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ… Ø¨Ø¹Ø¯</span>
                  <input id="gym-done" type="checkbox" />
                </div>
              </div>
            </div>
          </div>
        </article>
      </section>

      <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ù†ÙˆØªØ§Øª + Ø§Ù„Ø£ÙÙƒØ§Ø± -->
      <section>
        <article class="card notes-card">
          <header class="notes-header-row">
            <div class="notes-header-main">
              <div class="notes-header-title">Ù†ÙˆØªØ§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© âœï¸</div>
              <div class="notes-header-sub">
                Ø£Ù†Ø´Ø¦ ØµÙØ­Ø§Øª Ù…Ø®ØµÙ‘ØµØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙƒÙ…Ø§ ØªØ­Ø¨ â€“ ØºÙŠÙ‘Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†ØŒ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·ØŒ Ø­Ø¬Ù… Ø§Ù„Ù†ØµØŒ ÙˆØ£Ø¶Ù ØµÙˆØ±Ø© Ù„ÙƒÙ„ Ù†ÙˆØªØ©.
              </div>
            </div>
            <button id="new-note-btn" class="primary-btn">
              + Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </button>
          </header>

          <div class="notes-grid" id="notes-grid">
            <!-- Ø§Ù„Ù†ÙˆØªØ§Øª ØªØªÙˆÙ„Ù‘Ø¯ Ù‡Ù†Ø§ -->
          </div>
        </article>

        <article class="card gallery-card">
          <header class="card-header">
            <div>
              <div class="card-title">Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙƒØ§Ø± ğŸ’¡</div>
              <div class="card-sub">Ù…Ø³Ø§Ø­Ø© Ø¥Ù„Ù‡Ø§Ù… Ù„ØªØ¬Ø§Ø±Ø¨Ùƒ Ù…Ø¹ Ø§Ù„Ù†ÙˆØªØ§Øª â€“ ØªÙ…Ø§Ù…Ø§Ù‹ Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù„ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§ Ù…Ù† Notion.</div>
            </div>
          </header>
          <ul class="gallery-list">
            <li>Ø§ØµÙ†Ø¹ Ù†ÙˆØªØ© Ø¨Ø¹Ù†ÙˆØ§Ù† <strong>Ø®Ø·Ø© Ù…Ø§Ù„ÙŠØ©</strong>ØŒ Ø£Ø¶Ù ØµÙˆØ±Ø© Ø¨Ø³ÙŠØ·Ø©ØŒ ÙˆØ§Ø³ØªØ®Ø¯Ù… Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ† ÙˆØ®Ø· ÙƒØ¨ÙŠØ± Ù„Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†.</li>
            <li>Ø§ØµÙ†Ø¹ Ù†ÙˆØªØ© Ø¨Ø¹Ù†ÙˆØ§Ù† <strong>Ù…Ø®Ø·Ø· Ø£Ø³Ø¨ÙˆØ¹ÙŠ</strong>ØŒ Ù‚Ø³Ù‘Ù… ÙÙŠÙ‡Ø§ Ø§Ù„Ø£ÙŠØ§Ù… ÙÙŠ Ø§Ù„Ù†ØµØŒ ÙˆØ§Ø³ØªØ®Ø¯Ù… Ù„ÙˆÙ† Ù…Ø®ØªÙ„Ù Ù„ÙƒÙ„ ÙŠÙˆÙ….</li>
            <li>Ø¬Ø±Ù‘Ø¨ Ù†ÙˆØªØ© Ø¨Ø¹Ù†ÙˆØ§Ù† <strong>Ø±ÙˆØªÙŠÙ† Ø§Ù„ØµØ¨Ø§Ø­</strong> Ø£Ùˆ <strong>Ø±ÙˆØªÙŠÙ† Ø§Ù„Ù†ÙˆÙ…</strong> ÙˆØ§Ø¶Ø¨Ø· Ù…Ø¹Ù‡Ø§ ÙˆØ¯Ø¬Ø§Øª Ø§Ù„Ù…Ø§Ø¡ / Ø§Ù„Ù†ÙˆÙ….</li>
            <li>Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù„Ù†ÙˆØªØªÙƒ Ø§Ù„Ù…Ø¨Ø¯Ø¹Ø© ÙˆØ´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø£ØµØ­Ø§Ø¨Ùƒ â€“ Ù‡Ø°Ø§ ÙŠØ¬Ø¹Ù„ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¬Ø²Ø¡ Ù…Ù† Ø±ÙˆØªÙŠÙ† Ø­ÙŠØ§ØªÙ‡Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ.</li>
          </ul>
        </article>
      </section>
    </main>

    <footer class="footer">
      ØµÙÙ…Ù‘Ù… ÙˆØ¨ÙÙ†ÙŠ Ø¨ØªØ¹Ø§ÙˆÙ† Ø¨ÙŠÙ† <strong>Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ</strong> Ùˆ ATLAS Workspace.  
      ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯ÙˆÙ† ØªØ«Ø¨ÙŠØª Ø£Ùˆ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ù‚Ø¯.
    </footer>
  </div>

  <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¨Ø³ÙŠØ· -->
  <div id="login-overlay" class="overlay">
    <form id="login-form" class="login-card">
      <div class="login-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø­Ø© Ù…Ø­Ù…ÙˆØ¯ ğŸŒ™</div>
      <div class="login-sub">
        Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ¥ÙŠÙ…ÙŠÙ„Ùƒ ÙÙ‚Ø· Ù„Ø¹Ø±Ø¶ ØªØ­ÙŠØ© Ø´Ø®ØµÙŠØ© ÙˆØ­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².
      </div>

      <div class="form-group">
        <label class="form-label" for="login-name">Ø§Ù„Ø§Ø³Ù…</label>
        <input id="login-name" class="form-input" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…ÙˆØ¯" />
      </div>

      <div class="form-group">
        <label class="form-label" for="login-email">Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</label>
        <input id="login-email" type="email" class="form-input" placeholder="example@email.com" />
      </div>

      <button type="submit" class="primary-btn" style="width:100%;justify-content:center;margin-top:6px;">
        Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø³Ø§Ø­ØªÙŠ
      </button>

      <div class="login-helper">
        â‡¢ Ù‡Ø°Ø§ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù…Ø­Ù„ÙŠ ÙÙ‚Ø· (local). Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ØªÙØ®Ø²Ù‘ÙÙ† ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²ØŒ ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°ÙÙ‡Ø§ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­.
      </div>
    </form>
  </div>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ù†Ø´Ø§Ø¡ / ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†ÙˆØªØ© -->
  <div id="note-modal" class="overlay hidden">
    <form class="modal-card">
      <div class="login-title" style="margin-bottom:6px;">Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø© / ØªØ¹Ø¯ÙŠÙ„</div>
      <div class="login-sub">
        Ø®ØµÙ‘Øµ ÙƒÙ„ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ù†ÙˆØªØ©: Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø§Ù„Ù†ØµØŒ Ø§Ù„Ø£Ù„ÙˆØ§Ù†ØŒ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·ØŒ ÙˆØ­ØªÙ‰ ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù Ù…Ø«Ù„ Notion.
      </div>

      <div class="form-group">
        <label class="form-label" for="note-title-input">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†ÙˆØªØ©</label>
        <input id="note-title-input" class="form-input" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø®Ø·Ø· Ø£Ø³Ø¨ÙˆØ¹ÙŠØŒ Ø®Ø·Ø© Ø¯Ø±Ø§Ø³Ø©ØŒ Ø®Ø·Ø© Ù…Ø§Ù„ÙŠØ©..." />
      </div>

      <div class="form-group">
        <label class="form-label" for="note-content-input">Ø§Ù„Ù…Ø­ØªÙˆÙ‰</label>
        <textarea id="note-content-input" class="form-textarea" placeholder="Ø§ÙƒØªØ¨ Ù†ÙˆØªØªÙƒ Ù‡Ù†Ø§ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ø³ÙŠÙ…Ù‡Ø§ Ù„Ø£Ø³Ø·Ø± Ù…Ø«Ù„ Notion..."></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="note-bg-input">Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
          <input id="note-bg-input" type="color" class="form-input" />
        </div>
        <div class="form-group">
          <label class="form-label" for="note-color-input">Ù„ÙˆÙ† Ø§Ù„Ø®Ø·</label>
          <input id="note-color-input" type="color" class="form-input" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="note-font-input">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·</label>
          <select id="note-font-input" class="form-select form-input">
            <option value="Cairo">Cairo (Ø¹Ø±Ø¨ÙŠ Ù…Ø±ÙŠØ­)</option>
            <option value="Nunito">Nunito (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ù†Ø§Ø¹Ù…)</option>
            <option value="system-ui">System UI</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="note-size-input">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</label>
          <input id="note-size-input" type="number" min="10" max="30" class="form-input" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="note-image-input">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        <input id="note-image-input" class="form-input" placeholder="Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹" />
      </div>

      <div class="modal-actions">
        <button id="note-cancel-btn" class="secondary-btn">Ø¥Ù„ØºØ§Ø¡</button>
        <button id="note-save-btn" class="primary-btn" type="submit">Ø­ÙØ¸</button>
      </div>
    </form>
  </div>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    const defaultState = {
      theme: "dark",
      trackers: {
        water: 0,
        waterGoal: 8,
        sleepHours: 0,
        prayers: { fajr: false, dhuhr: false, asr: false, maghrib: false, isha: false },
        gymDone: false
      },
      notes: []
    };

    let currentUser = null;
    let state = JSON.parse(JSON.stringify(defaultState));
    let editingIndex = null;

    function getUserKey() {
      if (!currentUser) return null;
      return "atlas-life-" + currentUser.email;
    }

    function loadUserFromStorage() {
      const raw = localStorage.getItem("atlas-life-user");
      if (raw) {
        try {
          currentUser = JSON.parse(raw);
        } catch (e) {
          currentUser = null;
        }
      }
    }

    function saveUserToStorage() {
      if (currentUser) {
        localStorage.setItem("atlas-life-user", JSON.stringify(currentUser));
      } else {
        localStorage.removeItem("atlas-life-user");
      }
    }

    function loadState() {
      const key = getUserKey();
      if (!key) return;
      const raw = localStorage.getItem(key);
      if (raw) {
        try {
          const stored = JSON.parse(raw);
          state = Object.assign({}, defaultState, stored);
        } catch (e) {
          state = JSON.parse(JSON.stringify(defaultState));
        }
      } else {
        state = JSON.parse(JSON.stringify(defaultState));
      }
      applyTheme(state.theme || "dark");
      renderAll();
    }

    function saveState() {
      const key = getUserKey();
      if (!key) return;
      localStorage.setItem(key, JSON.stringify(state));
    }

    function applyTheme(theme) {
      document.body.classList.remove("theme-dark", "theme-light", "theme-oled");
      const cls = theme === "light" ? "theme-light" : theme === "oled" ? "theme-oled" : "theme-dark";
      document.body.classList.add(cls);
      const select = $("#theme-select");
      if (select) select.value = theme;
    }

    function getGreetingText() {
      const hour = new Date().getHours();
      if (hour < 12) return "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±";
      if (hour < 18) return "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±";
      return "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±";
    }

    function formatTodayDate() {
      const d = new Date();
      const days = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];
      const months = ["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"];
      const dayName = days[d.getDay()];
      const day = d.getDate();
      const month = months[d.getMonth()];
      const year = d.getFullYear();
      return `${dayName} â€¢ ${day} ${month} ${year}`;
    }

    function updateGreeting() {
      const greetEl = $("#greeting-text");
      const nameEl = $("#greeting-name");
      const dateEl = $("#today-date");
      if (greetEl) greetEl.textContent = getGreetingText();
      if (nameEl) nameEl.textContent = currentUser ? currentUser.name || "Ø¶ÙŠÙ" : "Ø¶ÙŠÙ";
      if (dateEl) dateEl.textContent = formatTodayDate();
    }

    function renderTrackers() {
      // Ù…Ø§Ø¡
      const water = state.trackers.water || 0;
      const goal = state.trackers.waterGoal || 8;
      const percent = goal > 0 ? Math.min(100, Math.round(water / goal * 100)) : 0;
      $("#water-count").textContent = water;
      $("#water-percent").textContent = percent + "%";
      $("#water-bar-fill").style.width = percent + "%";

      // Ù†ÙˆÙ…
      const sleepHoursInput = $("#sleep-hours");
      if (sleepHoursInput) {
        sleepHoursInput.value = state.trackers.sleepHours || "";
      }
      const sleepLabel = $("#sleep-label");
      if (sleepLabel) {
        sleepLabel.textContent = state.trackers.sleepHours
          ? `Ù†Ù…Øª ${state.trackers.sleepHours} Ø³Ø§Ø¹Ø©`
          : "Ù„Ù… ØªØ³Ø¬Ù‘Ù„ Ù†ÙˆÙ…Ùƒ Ø¨Ø¹Ø¯";
      }

      // ØµÙ„Ø§Ø©
      const prayers = state.trackers.prayers || {};
      ["fajr","dhuhr","asr","maghrib","isha"].forEach(key => {
        const cb = document.querySelector(`input[data-prayer="${key}"]`);
        if (cb) cb.checked = !!prayers[key];
      });
      const done = Object.values(prayers).filter(Boolean).length;
      const summary = $("#prayer-summary");
      if (summary) summary.textContent = `${done} / 5 ØµÙ„ÙˆØ§Øª`;

      // Ø¬ÙŠÙ…
      const gymToggle = $("#gym-done");
      if (gymToggle) {
        gymToggle.checked = !!state.trackers.gymDone;
      }
      const gymLabel = $("#gym-label");
      if (gymLabel) {
        gymLabel.textContent = state.trackers.gymDone
          ? "Ø£Ø­Ø³Ù†Øª! ØªÙ…Ø±Ù‘Ù†Øª Ø§Ù„ÙŠÙˆÙ… ğŸ’ª"
          : "Ù„Ù… ØªØ³Ø¬Ù‘Ù„ ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ… Ø¨Ø¹Ø¯";
      }
    }

    function renderNotes() {
      const container = $("#notes-grid");
      if (!container) return;
      container.innerHTML = "";

      if (!state.notes || !state.notes.length) {
        container.innerHTML = '<p class="empty-text">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯. Ø§Ø¶ØºØ· "Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø©" Ù„Ù„Ø¨Ø¯Ø¡ âœï¸</p>';
        return;
      }

      state.notes.forEach((note, index) => {
        const card = document.createElement("article");
        card.className = "note-card";
        card.style.backgroundColor = note.bg || "var(--card-soft)";
        card.style.color = note.color || "var(--text-main)";
        card.style.fontFamily = note.fontFamily || "Cairo";
        card.style.fontSize = (note.fontSize || 16) + "px";

        let html = "";
        if (note.image) {
          const safeUrl = note.image.replace(/'/g, "&#39;");
          html += `<div class="note-cover" style="background-image:url('${safeUrl}')"></div>`;
        }
        const safeTitle = note.title || "Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†";
        const safeContent = (note.content || "").replace(/\n/g, "<br>");

        html += `
          <div class="note-body">
            <h3 class="note-title">${safeTitle}</h3>
            <p class="note-content">${safeContent}</p>
          </div>
          <div class="note-actions">
            <button type="button" data-edit="${index}">ØªØ¹Ø¯ÙŠÙ„</button>
            <button type="button" data-delete="${index}">Ø­Ø°Ù</button>
          </div>
        `;
        card.innerHTML = html;
        container.appendChild(card);
      });
    }

    function renderAll() {
      updateGreeting();
      renderTrackers();
      renderNotes();
    }

    // Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù†ÙˆØªØ©
    function openNoteModal(index) {
      editingIndex = (index !== null && index !== undefined) ? index : null;
      const modal = $("#note-modal");
      modal.classList.remove("hidden");

      const note = (editingIndex !== null && state.notes[editingIndex])
        ? state.notes[editingIndex]
        : { title: "", content: "", bg: "#0f172a", color: "#f9fafb", fontFamily: "Cairo", fontSize: 16, image: "" };

      $("#note-title-input").value = note.title || "";
      $("#note-content-input").value = note.content || "";
      $("#note-bg-input").value = note.bg || "#0f172a";
      $("#note-color-input").value = note.color || "#f9fafb";
      $("#note-font-input").value = note.fontFamily || "Cairo";
      $("#note-size-input").value = note.fontSize || 16;
      $("#note-image-input").value = note.image || "";
    }

    function closeNoteModal() {
      $("#note-modal").classList.add("hidden");
      editingIndex = null;
    }

    function saveNoteFromModal() {
      const note = {
        title: $("#note-title-input").value.trim(),
        content: $("#note-content-input").value.trim(),
        bg: $("#note-bg-input").value || "#0f172a",
        color: $("#note-color-input").value || "#f9fafb",
        fontFamily: $("#note-font-input").value || "Cairo",
        fontSize: parseInt($("#note-size-input").value, 10) || 16,
        image: $("#note-image-input").value.trim()
      };

      if (editingIndex !== null && editingIndex >= 0 && editingIndex < state.notes.length) {
        state.notes[editingIndex] = note;
      } else {
        state.notes.unshift(note);
      }

      saveState();
      closeNoteModal();
      renderNotes();
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­Ù„ÙŠ
    function showLogin() {
      $("#login-overlay").classList.remove("hidden");
    }

    function hideLogin() {
      $("#login-overlay").classList.add("hidden");
    }

    function handleLoginSubmit(e) {
      e.preventDefault();
      const name = $("#login-name").value.trim() || "Ø¶ÙŠÙ";
      const email = $("#login-email").value.trim() || "guest@example.com";
      currentUser = { name, email };
      saveUserToStorage();
      loadState();
      hideLogin();
    }

    function handleLogout() {
      const yes = confirm("ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø³ØªØ¨Ù‚Ù‰ Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²ØŒ ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹.");
      if (!yes) return;
      currentUser = null;
      saveUserToStorage();
      showLogin();
    }

    function initEvents() {
      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
      $("#login-form").addEventListener("submit", handleLoginSubmit);
      $("#logout-btn").addEventListener("click", handleLogout);

      // Ø§Ù„Ø«ÙŠÙ…
      $("#theme-select").addEventListener("change", (e) => {
        state.theme = e.target.value;
        applyTheme(state.theme);
        saveState();
      });

      // Ù…Ø§Ø¡
      $("#water-plus").addEventListener("click", () => {
        state.trackers.water = Math.min(state.trackers.waterGoal, (state.trackers.water || 0) + 1);
        saveState();
        renderTrackers();
      });

      $("#water-minus").addEventListener("click", () => {
        state.trackers.water = Math.max(0, (state.trackers.water || 0) - 1);
        saveState();
        renderTrackers();
      });

      // Ù†ÙˆÙ…
      $("#sleep-hours").addEventListener("change", (e) => {
        state.trackers.sleepHours = parseFloat(e.target.value) || 0;
        saveState();
        renderTrackers();
      });

      // ØµÙ„Ø§Ø©
      $$("input[data-prayer]").forEach((cb) => {
        cb.addEventListener("change", (e) => {
          const key = e.target.getAttribute("data-prayer");
          state.trackers.prayers[key] = e.target.checked;
          saveState();
          renderTrackers();
        });
      });

      // Ø¬ÙŠÙ…
      $("#gym-done").addEventListener("change", (e) => {
        state.trackers.gymDone = e.target.checked;
        saveState();
        renderTrackers();
      });

      // Ù†ÙˆØªØ§Øª
      $("#new-note-btn").addEventListener("click", () => openNoteModal(null));
      $("#note-cancel-btn").addEventListener("click", (e) => {
        e.preventDefault();
        closeNoteModal();
      });
      $("#note-save-btn").addEventListener("click", (e) => {
        e.preventDefault();
        saveNoteFromModal();
      });

      $("#notes-grid").addEventListener("click", (e) => {
        const editIndex = e.target.getAttribute("data-edit");
        const deleteIndex = e.target.getAttribute("data-delete");
        if (editIndex !== null && editIndex !== undefined) {
          openNoteModal(parseInt(editIndex, 10));
        } else if (deleteIndex !== null && deleteIndex !== undefined) {
          const idx = parseInt(deleteIndex, 10);
          const ok = confirm("Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ");
          if (ok) {
            state.notes.splice(idx, 1);
            saveState();
            renderNotes();
          }
        }
      });
    }

    window.addEventListener("DOMContentLoaded", () => {
      loadUserFromStorage();
      initEvents();
      if (currentUser) {
        loadState();
        hideLogin();
      } else {
        applyTheme("dark");
        showLogin();
      }
    });
  </script>
</body>
</html>
