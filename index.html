<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ATLAS Workspace - Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #050816;
      --bg-soft: #0b1020;
      --bg-card: #0f172a;
      --bg-oled: #000000;
      --accent: #22c1c3;
      --accent-soft: rgba(34, 193, 195, 0.15);
      --text: #f9fafb;
      --text-soft: #9ca3af;
      --border: #1f2937;
      --danger: #ef4444;
      --radius-xl: 18px;
      --radius-lg: 14px;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.55);
      --font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* Ø«ÙŠÙ… ÙØ§ØªØ­ */
    .theme-light {
      --bg: #f3f4f6;
      --bg-soft: #e5e7eb;
      --bg-card: #ffffff;
      --text: #020617;
      --text-soft: #4b5563;
      --border: #e5e7eb;
      --shadow-soft: 0 10px 30px rgba(15,23,42,0.12);
    }

    /* Ø«ÙŠÙ… Ø£Ø³ÙˆØ¯ OLED */
    .theme-oled {
      --bg: #000000;
      --bg-soft: #020617;
      --bg-card: #020617;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.9);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-main);
      background: radial-gradient(circle at top, #1e293b 0, var(--bg) 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 20px;
    }

    .app-shell {
      width: 100%;
      max-width: 1200px;
      border-radius: 26px;
      background: linear-gradient(135deg, rgba(148,163,184,0.1), rgba(15,23,42,0.9));
      padding: 1px;
      box-shadow: var(--shadow-soft);
    }

    .app-inner {
      border-radius: 25px;
      background: radial-gradient(circle at top left, rgba(56,189,248,0.22), transparent 60%),
                  radial-gradient(circle at bottom right, rgba(251,191,36,0.16), transparent 55%),
                  var(--bg);
      min-height: calc(100vh - 40px);
      display: flex;
      flex-direction: column;
      padding: 16px;
      gap: 12px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #22c1c3, #0f172a);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#e5e7eb;
      font-weight: 800;
      font-size: 22px;
      box-shadow: 0 0 30px rgba(34,193,195,0.6);
    }

    .brand-text-title {
      font-size: 18px;
      font-weight: 700;
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .header-right {
      display:flex;
      align-items:center;
      gap:10px;
    }

    .theme-switcher {
      display:flex;
      gap:6px;
      padding:4px;
      border-radius:999px;
      background:rgba(15,23,42,0.9);
      border:1px solid rgba(148,163,184,0.3);
    }

    .pill-btn {
      border:none;
      padding:5px 10px;
      border-radius:999px;
      font-size:11px;
      cursor:pointer;
      background:transparent;
      color:var(--text-soft);
    }

    .pill-btn.active {
      background:var(--accent-soft);
      color:var(--text);
    }

    .btn {
      border:none;
      padding:8px 14px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      background:linear-gradient(135deg,#22c1c3,#6366f1);
      color:#f9fafb;
      box-shadow:0 10px 25px rgba(37,99,235,0.45);
      display:flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
    }

    .btn-secondary {
      background:transparent;
      border:1px solid rgba(148,163,184,0.6);
      box-shadow:none;
      color:var(--text-soft);
    }

    .status-dot {
      width:9px;height:9px;
      border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 10px rgba(34,197,94,0.9);
    }

    main {
      display:grid;
      grid-template-columns:240px 1fr 250px;
      gap:12px;
      flex:1;
      min-height:0;
    }

    .pane {
      border-radius:var(--radius-xl);
      background:rgba(15,23,42,0.92);
      border:1px solid rgba(148,163,184,0.25);
      padding:14px;
      backdrop-filter: blur(30px);
      box-shadow: var(--shadow-soft);
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .pane-title {
      font-size:13px;
      font-weight:600;
      margin-bottom:4px;
    }

    .pane-sub {
      font-size:11px;
      color:var(--text-soft);
    }

    .nav-list {
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-top:6px;
    }

    .nav-item {
      padding:8px 10px;
      border-radius:12px;
      font-size:12px;
      color:var(--text-soft);
      display:flex;
      align-items:center;
      justify-content:space-between;
      cursor:pointer;
      transition:0.15s;
    }

    .nav-item span {
      display:flex;
      align-items:center;
      gap:6px;
    }

    .nav-item.active,
    .nav-item:hover {
      background:var(--accent-soft);
      color:var(--text);
    }

    .badge {
      font-size:10px;
      padding:2px 6px;
      border-radius:999px;
      background:rgba(15,23,42,0.9);
      border:1px solid rgba(148,163,184,0.4);
    }

    .greeting-card {
      border-radius:var(--radius-lg);
      padding:10px 12px;
      background:linear-gradient(135deg,rgba(34,193,195,0.08),rgba(129,140,248,0.1));
      border:1px solid rgba(129,140,248,0.5);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
    }

    .greeting-main {
      font-size:13px;
      font-weight:600;
    }

    .widgets-grid {
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:8px;
    }

    .widget {
      border-radius:14px;
      padding:8px;
      background:rgba(15,23,42,0.98);
      border:1px solid rgba(148,163,184,0.35);
      font-size:11px;
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .widget-top {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:4px;
    }

    .widget-label {
      font-weight:600;
      font-size:11px;
    }

    .widget-value {
      font-size:11px;
      color:var(--text-soft);
    }

    .widget-bar {
      height:6px;
      border-radius:999px;
      background:rgba(15,23,42,1);
      overflow:hidden;
    }

    .widget-fill {
      height:100%;
      width:0;
      border-radius:999px;
      background:linear-gradient(90deg,#22c1c3,#a855f7);
      transition: width 0.2s;
    }

    .widget-actions {
      display:flex;
      gap:6px;
      margin-top:4px;
    }

    .btn-xs {
      border:none;
      padding:3px 6px;
      border-radius:999px;
      font-size:10px;
      cursor:pointer;
      background:rgba(15,23,42,0.9);
      border:1px solid rgba(148,163,184,0.5);
      color:var(--text-soft);
    }

    .btn-xs.primary {
      background:var(--accent-soft);
      color:var(--text);
      border-color:transparent;
    }

    .note-toolbar {
      display:flex;
      gap:8px;
      align-items:center;
      margin-bottom:8px;
      flex-wrap:wrap;
    }

    .note-toolbar select,
    .note-toolbar input {
      font-size:11px;
      padding:4px 6px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      background:rgba(15,23,42,0.9);
      color:var(--text);
      outline:none;
    }

    .note-toolbar label {
      font-size:11px;
      color:var(--text-soft);
    }

    .note-title {
      width:100%;
      border:none;
      outline:none;
      margin:4px 0 6px;
      font-size:16px;
      background:transparent;
      color:var(--text);
      font-weight:600;
    }

    .note-editor {
      width:100%;
      min-height:180px;
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.4);
      background:rgba(15,23,42,0.95);
      padding:10px;
      font-size:13px;
      color:var(--text);
      resize:vertical;
      outline:none;
    }

    .note-preview-img {
      width:100%;
      max-height:160px;
      object-fit:cover;
      border-radius:14px;
      margin-top:8px;
      border:1px solid rgba(148,163,184,0.4);
    }

    .notes-list {
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:8px;
      max-height:260px;
      overflow:auto;
    }

    .note-card {
      border-radius:12px;
      padding:8px 10px;
      background:rgba(15,23,42,0.96);
      border:1px solid rgba(55,65,81,0.9);
      cursor:pointer;
      font-size:11px;
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .note-card-title {
      font-weight:600;
      font-size:12px;
    }

    .note-card-meta {
      display:flex;
      justify-content:space-between;
      color:var(--text-soft);
      font-size:10px;
    }

    .footer {
      margin-top:6px;
      font-size:10px;
      color:var(--text-soft);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }

    .footer span strong {
      color:#e5e7eb;
    }

    /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
    .login-screen {
      position:fixed;
      inset:0;
      background:radial-gradient(circle at top,#1e293b 0,#020617 55%);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:20;
    }

    .login-card {
      width:100%;
      max-width:420px;
      border-radius:24px;
      background:rgba(15,23,42,0.98);
      border:1px solid rgba(148,163,184,0.5);
      padding:22px 20px 18px;
      box-shadow:0 22px 60px rgba(0,0,0,0.85);
    }

    .login-title {
      font-size:20px;
      font-weight:700;
      margin-bottom:4px;
    }

    .login-sub {
      font-size:12px;
      color:var(--text-soft);
      margin-bottom:12px;
    }

    .provider-btn {
      width:100%;
      border-radius:999px;
      padding:10px 12px;
      border:1px solid rgba(148,163,184,0.6);
      background:#020617;
      color:var(--text);
      font-size:13px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      cursor:pointer;
      margin-bottom:8px;
    }

    .provider-logo {
      width:18px;
      height:18px;
      border-radius:4px;
      background:#ffffff;
    }

    .login-badge {
      font-size:11px;
      color:var(--text-soft);
      margin-top:8px;
      text-align:center;
    }

    .hidden {
      display:none !important;
    }

    @media (max-width:900px) {
      main {
        grid-template-columns:1fr;
      }
    }

    @media (max-width:600px) {
      .app-inner {
        padding:10px;
      }
    }
  </style>
</head>
<body class="theme-dark">

  <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div class="login-screen" id="login-screen">
    <div class="login-card">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px;">
        <div class="brand-logo">A</div>
        <div>
          <div class="login-title">ATLAS Workspace</div>
          <div class="login-sub">Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„ØªÙ†Ø¸ÙŠÙ… Ø­ÙŠØ§ØªÙƒ â€“ Ù…Ù† ØµÙ†Ø¹ Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ.</div>
        </div>
      </div>

      <button class="provider-btn" id="btn-google-login">
        <div class="provider-logo"></div>
        <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Google</span>
      </button>

      <!-- Ø£Ø²Ø±Ø§Ø± Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ (ÙÙŠØ³Ø¨ÙˆÙƒ / Ø£Ø¨Ù„...) Ø´ÙƒÙ„ ÙÙ‚Ø· -->
      <button class="provider-btn" style="opacity:0.5;cursor:not-allowed;">
        <span>Ù‚Ø±ÙŠØ¨Ø§Ù‹: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨Ø§Øª Ø£Ø®Ø±Ù‰</span>
      </button>

      <div class="login-badge">
        Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø­ÙØ¸ Ù†ÙˆØªØ§ØªÙƒ ÙÙŠ Ø³Ø­Ø§Ø¨Ø© Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ.
      </div>
    </div>
  </div>

  <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
  <div class="app-shell">
    <div class="app-inner">
      <header>
        <div class="brand">
          <div class="brand-logo">A</div>
          <div>
            <div class="brand-text-title">ATLAS Workspace</div>
            <div class="brand-text-sub">
              Ù…Ø³Ø§Ø­Ø© Ø¥Ù†ØªØ§Ø¬ÙŠØ© ÙŠÙˆÙ…ÙŠØ© â€“ ØªØµÙ…ÙŠÙ… ÙˆØ¨Ø±Ù…Ø¬Ø© <strong>Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ</strong>.
            </div>
          </div>
        </div>

        <div class="header-right">
          <div class="theme-switcher">
            <button class="pill-btn active" data-theme="dark">Dark</button>
            <button class="pill-btn" data-theme="light">Light</button>
            <button class="pill-btn" data-theme="oled">OLED</button>
          </div>
          <button class="btn-secondary btn" id="btn-logout" style="padding-inline:10px;font-size:11px;">
            <span class="status-dot" id="online-dot" style="background:#f97316;box-shadow:none;"></span>
            <span id="user-label">ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„</span>
          </button>
        </div>
      </header>

      <main>
        <!-- Ù„ÙˆØ­Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© -->
        <section class="pane">
          <div class="pane-title">Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
          <div class="pane-sub">Ø§Ø®ØªØ± Ù…Ø§ ØªØ±ÙƒØ² Ø¹Ù„ÙŠÙ‡ Ø§Ù„ÙŠÙˆÙ….</div>

          <div class="nav-list">
            <div class="nav-item active">
              <span>ğŸ““ Ù†ÙˆØªØ§ØªÙŠ</span>
              <span class="badge">Ø£Ø³Ø§Ø³ÙŠ</span>
            </div>
            <div class="nav-item">
              <span>âœ… Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</span>
              <span class="badge">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
            <div class="nav-item">
              <span>ğŸ“… Ø¬Ø¯ÙˆÙ„ Ø£Ø³Ø¨ÙˆØ¹ÙŠ</span>
              <span class="badge">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
            <div class="nav-item">
              <span>ğŸŒ Ù…Ø¬ØªÙ…Ø¹ ATLAS</span>
              <span class="badge">ÙÙƒØ±Ø© / ØªØµÙ…ÙŠÙ…</span>
            </div>
          </div>

          <div class="greeting-card" id="greeting-card">
            <div>
              <div class="greeting-main" id="greeting-text">Ù…Ø±Ø­Ø¨Ø§Ù‹ ğŸ‘‹</div>
              <div style="font-size:11px;color:var(--text-soft);" id="greeting-sub">
                Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ÙŠØ¨Ø¯Ø£ ØªÙ†Ø¸ÙŠÙ… ÙŠÙˆÙ…Ùƒ.
              </div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:11px;color:var(--text-soft);">Ø§Ù„ÙŠÙˆÙ…</div>
              <div style="font-size:12px;font-weight:600;" id="greeting-date"></div>
            </div>
          </div>

          <div style="margin-top:6px;font-size:10px;color:var(--text-soft);">
            ğŸ’¡ Ø¬Ø±Ù‘Ø¨ ØªØ®ØµÙŠØµ Ø§Ù„Ù†ÙˆØªØ© Ø¹Ù„Ù‰ Ø°ÙˆÙ‚Ùƒ Ø«Ù… Ø§Ù„ØªÙ‚Ø· Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© ÙˆØ´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ.
          </div>
        </section>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ÙˆØªØ§Øª -->
        <section class="pane">
          <div class="pane-title">Ø¯ÙØªØ± Ø§Ù„Ù†ÙˆØªØ§Øª</div>
          <div class="pane-sub">Ø£Ù†Ø´Ø¦ ØµÙØ­Ø§ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© Ù…Ø«Ù„ Notion â€“ Ù„ÙƒÙ† Ø¨Ø·Ø±ÙŠÙ‚ØªÙƒ.</div>

          <div class="note-toolbar">
            <label>Ø­Ø¬Ù… Ø§Ù„Ø®Ø·
              <select id="note-font-size">
                <option value="13">ØµØºÙŠØ±</option>
                <option value="15" selected>Ù…ØªÙˆØ³Ø·</option>
                <option value="18">ÙƒØ¨ÙŠØ±</option>
                <option value="22">Ø¹Ù†ÙˆØ§Ù† ÙƒØ¨ÙŠØ±</option>
              </select>
            </label>

            <label>Ù„ÙˆÙ† Ø§Ù„Ø®Ø·
              <input type="color" id="note-font-color" value="#ffffff" />
            </label>

            <label>Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†ÙˆØªØ©
              <input type="color" id="note-bg-color" value="#020617" />
            </label>

            <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø©
              <input type="text" id="note-image-url" placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ" style="min-width:140px;" />
            </label>

            <button class="btn-xs primary" id="btn-new-note">+ Ù†ÙˆØªØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button class="btn-xs" id="btn-save-note">ğŸ’¾ Ø­ÙØ¸</button>
            <button class="btn-xs" id="btn-delete-note">ğŸ—‘ Ø­Ø°Ù</button>
          </div>

          <input id="note-title" class="note-title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†ÙˆØªØ©..." />

          <textarea id="note-body" class="note-editor" placeholder="Ø§ÙƒØªØ¨ Ø£ÙÙƒØ§Ø±ÙƒØŒ Ø®Ø·Ø·ÙƒØŒ Ø¬Ø¯ÙˆÙ„ÙƒØŒ Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ ÙŠØ®Ø·Ø± ÙÙŠ Ø¨Ø§Ù„Ùƒ"></textarea>
          <img id="note-preview-img" class="note-preview-img hidden" alt="ØµÙˆØ±Ø© Ø§Ù„Ù†ÙˆØªØ©" />

          <div class="pane-sub" style="margin-top:6px;">
            Ù…Ù„Ø§Ø­Ø¸Ø©: Ù†ÙˆØªØ§ØªÙƒ ØªÙØ­ÙØ¸ Ø¨Ø§Ø³Ù… Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Firebase â€“ ÙŠÙ…ÙƒÙ†Ùƒ ÙØªØ­Ù‡Ø§ Ù…Ù† Ø£ÙŠ Ø¬Ù‡Ø§Ø² Ø¨Ù†ÙØ³ Ø§Ù„Ø­Ø³Ø§Ø¨.
          </div>
        </section>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ÙˆØ¯Ø¬Ø§Øª ÙˆÙ‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ÙˆØªØ§Øª -->
        <section class="pane">
          <div class="pane-title">ÙˆØ¯Ø¬Ø§Øª Ø­ÙŠØ§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
          <div class="pane-sub">ØªØ§Ø¨Ø¹ Ø¹Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¨Ø´ÙƒÙ„ Ø³Ø±ÙŠØ¹.</div>

          <div class="widgets-grid" style="margin-top:4px;">
            <div class="widget" data-widget="water">
              <div class="widget-top">
                <div class="widget-label">ğŸ’§ Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡</div>
                <div class="widget-value" id="water-label">0 / 8 ÙƒØ§Ø³Ø§Øª</div>
              </div>
              <div class="widget-bar"><div class="widget-fill" id="water-bar"></div></div>
              <div class="widget-actions">
                <button class="btn-xs primary" data-action="inc">+1</button>
                <button class="btn-xs" data-action="reset">Ø¥Ø¹Ø§Ø¯Ø©</button>
              </div>
            </div>

            <div class="widget" data-widget="sleep">
              <div class="widget-top">
                <div class="widget-label">ğŸ˜´ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù†ÙˆÙ…</div>
                <div class="widget-value" id="sleep-label">0 / 8</div>
              </div>
              <div class="widget-bar"><div class="widget-fill" id="sleep-bar"></div></div>
              <div class="widget-actions">
                <button class="btn-xs primary" data-action="inc">+1</button>
                <button class="btn-xs" data-action="reset">Ø¥Ø¹Ø§Ø¯Ø©</button>
              </div>
            </div>

            <div class="widget" data-widget="prayer">
              <div class="widget-top">
                <div class="widget-label">ğŸ•Œ Ø§Ù„ØµÙ„ÙˆØ§Øª</div>
                <div class="widget-value" id="prayer-label">0 / 5</div>
              </div>
              <div class="widget-bar"><div class="widget-fill" id="prayer-bar"></div></div>
              <div class="widget-actions">
                <button class="btn-xs primary" data-action="inc">+1</button>
                <button class="btn-xs" data-action="reset">Ø¥Ø¹Ø§Ø¯Ø©</button>
              </div>
            </div>

            <div class="widget" data-widget="gym">
              <div class="widget-top">
                <div class="widget-label">ğŸ‹ï¸â€â™‚ï¸ Ø§Ù„Ø¬ÙŠÙ… / Ø§Ù„ØªÙ…Ø±ÙŠÙ†</div>
                <div class="widget-value" id="gym-label">0 / 4 Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹</div>
              </div>
              <div class="widget-bar"><div class="widget-fill" id="gym-bar"></div></div>
              <div class="widget-actions">
                <button class="btn-xs primary" data-action="inc">+1</button>
                <button class="btn-xs" data-action="reset">Ø¥Ø¹Ø§Ø¯Ø©</button>
              </div>
            </div>
          </div>

          <hr style="border:none;border-top:1px solid rgba(148,163,184,0.3);margin:10px 0;" />

          <div class="pane-title">Ù†ÙˆØªØ§ØªÙŠ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</div>
          <div class="notes-list" id="notes-list">
            <!-- ØªÙ…ØªÙ„Ø¦ Ù…Ù† Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
          </div>

          <div class="footer">
            <span>Ù…ÙˆÙ‚Ø¹ <strong>ATLAS Workspace</strong> â€“ ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ Ø¨ÙˆØ§Ø³Ø·Ø© Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„ØµÙ…Ø§Ø¯ÙŠ.</span>
            <span>v1 â€¢ ØªØ­Øª Ø§Ù„ØªØ·ÙˆÙŠØ±</span>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Firebase + Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
  <script type="module">
    // 1) Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase (Ù†Ø³Ø®Ø© 9)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      signInWithPopup,
      onAuthStateChanged,
      signOut
    } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
    import {
      getFirestore,
      collection,
      addDoc,
      getDocs,
      query,
      where,
      orderBy,
      doc,
      setDoc,
      deleteDoc,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    // 2) Ø¥Ø¹Ø¯Ø§Ø¯ firebaseConfig
    // TODO: Ø¶Ø¹ ÙƒØ§Ø¦Ù† firebaseConfig Ø§Ù„Ø°ÙŠ Ù†Ø³Ø®ØªÙ‡ Ù…Ù† Firebase Ù‡Ù†Ø§ Ø¨Ø¯Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø§Ù„:
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDTOtQbGaLpGtDc34GXzcdppCvEJ60TYSs",
  authDomain: "atlas-workspace.firebaseapp.com",
  projectId: "atlas-workspace",
  storageBucket: "atlas-workspace.firebasestorage.app",
  messagingSenderId: "95882710960",
  appId: "1:95882710960:web:9fcafcc1d4d057029ad075",
  measurementId: "G-KJ446WXXHG"
};

    // 3) ØªÙ‡ÙŠØ¦Ø© Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    // Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
    const loginScreen = document.getElementById("login-screen");
    const btnGoogleLogin = document.getElementById("btn-google-login");
    const btnLogout = document.getElementById("btn-logout");
    const userLabel = document.getElementById("user-label");
    const onlineDot = document.getElementById("online-dot");

    const greetingText = document.getElementById("greeting-text");
    const greetingSub = document.getElementById("greeting-sub");
    const greetingDate = document.getElementById("greeting-date");

    const themeButtons = document.querySelectorAll(".pill-btn");

    const noteTitle = document.getElementById("note-title");
    const noteBody = document.getElementById("note-body");
    const noteImageUrl = document.getElementById("note-image-url");
    const notePreviewImg = document.getElementById("note-preview-img");
    const fontSizeSelect = document.getElementById("note-font-size");
    const fontColorInput = document.getElementById("note-font-color");
    const bgColorInput = document.getElementById("note-bg-color");
    const btnNewNote = document.getElementById("btn-new-note");
    const btnSaveNote = document.getElementById("btn-save-note");
    const btnDeleteNote = document.getElementById("btn-delete-note");
    const notesList = document.getElementById("notes-list");

    // ÙˆØ¯Ø¬Ø§Øª
    const widgets = {
      water: { max: 8, count: 0, bar: document.getElementById("water-bar"), label: document.getElementById("water-label") },
      sleep: { max: 8, count: 0, bar: document.getElementById("sleep-bar"), label: document.getElementById("sleep-label") },
      prayer: { max: 5, count: 0, bar: document.getElementById("prayer-bar"), label: document.getElementById("prayer-label") },
      gym: { max: 4, count: 0, bar: document.getElementById("gym-bar"), label: document.getElementById("gym-label") },
    };

    let currentUser = null;
    let currentNoteId = null;

    // --------- Ø«ÙŠÙ… Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ---------
    function applyTheme(theme) {
      document.body.classList.remove("theme-light", "theme-dark", "theme-oled");
      if (theme === "light") document.body.classList.add("theme-light");
      else if (theme === "oled") document.body.classList.add("theme-oled");
      else document.body.classList.add("theme-dark");
      localStorage.setItem("atlas-theme", theme);

      themeButtons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.theme === theme);
      });
    }

    themeButtons.forEach(btn => {
      btn.addEventListener("click", () => applyTheme(btn.dataset.theme));
    });

    const savedTheme = localStorage.getItem("atlas-theme") || "dark";
    applyTheme(savedTheme);

    // --------- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø§Ù„Ø®Ø±ÙˆØ¬ ---------
    btnGoogleLogin.addEventListener("click", async () => {
      try {
        await signInWithPopup(auth, provider);
      } catch (err) {
        console.error(err);
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Google.");
      }
    });

    btnLogout.addEventListener("click", async () => {
      if (!currentUser) return;
      await signOut(auth);
    });

    onAuthStateChanged(auth, async (user) => {
      currentUser = user;
      if (user) {
        loginScreen.classList.add("hidden");
        onlineDot.style.background = "#22c55e";
        userLabel.textContent = user.displayName || user.email || "Ù…Ø³ØªØ®Ø¯Ù…";
        updateGreeting(user);
        await loadNotes();
      } else {
        loginScreen.classList.remove("hidden");
        onlineDot.style.background = "#f97316";
        userLabel.textContent = "ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„";
        notesList.innerHTML = "";
      }
    });

    function updateGreeting(user) {
      const now = new Date();
      const hour = now.getHours();
      const name = user.displayName || "ØµØ¯ÙŠÙ‚ÙŠ";
      let msg = "Ù…Ø±Ø­Ø¨Ø§Ù‹";
      if (hour < 12) msg = "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±";
      else if (hour < 18) msg = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±";
      else msg = "Ø³Ù‡Ø±Ø© Ù„Ø·ÙŠÙØ©";

      greetingText.textContent = `${msg}ØŒ ${name}`;
      greetingSub.textContent = "Ø§Ø®ØªØ± Ù†ÙˆØªØ© Ø£Ùˆ Ø£Ù†Ø´Ø¦ ÙˆØ§Ø­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ†Ø¸ÙŠÙ….";
      greetingDate.textContent = now.toLocaleDateString("ar-JO", { weekday:"long", day:"numeric", month:"long" });
    }

    // --------- ÙˆØ¯Ø¬Ø§Øª Ø§Ù„Ø¹Ø§Ø¯Ø§Øª ---------
    function updateWidgetUI(key) {
      const w = widgets[key];
      const ratio = Math.min(w.count / w.max, 1);
      w.bar.style.width = (ratio * 100) + "%";

      if (key === "water") {
        w.label.textContent = `${w.count} / ${w.max} ÙƒØ§Ø³Ø§Øª`;
      } else if (key === "sleep") {
        w.label.textContent = `${w.count} / ${w.max}`;
      } else if (key === "prayer") {
        w.label.textContent = `${w.count} / ${w.max}`;
      } else if (key === "gym") {
        w.label.textContent = `${w.count} / ${w.max} Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹`;
      }
    }

    function saveWidgetsLocal() {
      const data = {};
      Object.keys(widgets).forEach(k => data[k] = widgets[k].count);
      localStorage.setItem("atlas-widgets", JSON.stringify(data));
    }

    function loadWidgetsLocal() {
      const raw = localStorage.getItem("atlas-widgets");
      if (!raw) return;
      try {
        const data = JSON.parse(raw);
        Object.keys(widgets).forEach(k => {
          if (data[k] != null) widgets[k].count = data[k];
          updateWidgetUI(k);
        });
      } catch {}
    }

    loadWidgetsLocal();
    Object.keys(widgets).forEach(k => updateWidgetUI(k));

    document.querySelectorAll(".widget").forEach(widgetEl => {
      const key = widgetEl.dataset.widget;
      widgetEl.querySelectorAll(".btn-xs").forEach(btn => {
        btn.addEventListener("click", () => {
          const action = btn.dataset.action;
          if (action === "inc") {
            widgets[key].count = Math.min(widgets[key].count + 1, widgets[key].max);
          } else if (action === "reset") {
            widgets[key].count = 0;
          }
          updateWidgetUI(key);
          saveWidgetsLocal();
        });
      });
    });

    // --------- Ø§Ù„Ù†ÙˆØªØ§Øª (Firestore) ---------
    function resetNoteEditor() {
      currentNoteId = null;
      noteTitle.value = "";
      noteBody.value = "";
      fontSizeSelect.value = "15";
      fontColorInput.value = "#ffffff";
      bgColorInput.value = "#020617";
      noteImageUrl.value = "";
      notePreviewImg.classList.add("hidden");
      applyNoteStyles();
    }

    function applyNoteStyles() {
      const size = fontSizeSelect.value;
      const color = fontColorInput.value;
      const bg = bgColorInput.value;
      noteBody.style.fontSize = size + "px";
      noteBody.style.color = color;
      noteBody.style.backgroundColor = bg;
    }

    fontSizeSelect.addEventListener("change", applyNoteStyles);
    fontColorInput.addEventListener("input", applyNoteStyles);
    bgColorInput.addEventListener("input", applyNoteStyles);

    noteImageUrl.addEventListener("change", () => {
      const url = noteImageUrl.value.trim();
      if (url) {
        notePreviewImg.src = url;
        notePreviewImg.classList.remove("hidden");
      } else {
        notePreviewImg.classList.add("hidden");
      }
    });

    btnNewNote.addEventListener("click", () => {
      resetNoteEditor();
    });

    btnSaveNote.addEventListener("click", async () => {
      if (!currentUser) {
        alert("Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.");
        return;
      }
      const title = noteTitle.value.trim() || "Ù†ÙˆØªØ© Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†";
      const body = noteBody.value.trim();
      const img = noteImageUrl.value.trim();
      const fontSize = fontSizeSelect.value;
      const fontColor = fontColorInput.value;
      const bgColor = bgColorInput.value;

      try {
        if (currentNoteId) {
          await setDoc(doc(db, "notes", currentNoteId), {
            uid: currentUser.uid,
            title, body, img, fontSize, fontColor, bgColor,
            updatedAt: serverTimestamp(),
          }, { merge: true });
        } else {
          const ref = await addDoc(collection(db, "notes"), {
            uid: currentUser.uid,
            title, body, img, fontSize, fontColor, bgColor,
            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp(),
          });
          currentNoteId = ref.id;
        }

        await loadNotes();
      } catch (err) {
        console.error(err);
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ù†ÙˆØªØ©.");
      }
    });

    btnDeleteNote.addEventListener("click", async () => {
      if (!currentUser || !currentNoteId) return;
      if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù†ÙˆØªØ©ØŸ")) return;
      try {
        await deleteDoc(doc(db, "notes", currentNoteId));
        resetNoteEditor();
        await loadNotes();
      } catch (err) {
        console.error(err);
        alert("ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù†ÙˆØªØ©.");
      }
    });

    async function loadNotes() {
      if (!currentUser) return;
      notesList.innerHTML = "<div style='font-size:11px;color:var(--text-soft);'>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†ÙˆØªØ§ØªÙƒ...</div>";

      try {
        const q = query(
          collection(db, "notes"),
          where("uid", "==", currentUser.uid),
          orderBy("updatedAt", "desc")
        );
        const snap = await getDocs(q);
        notesList.innerHTML = "";
        if (snap.empty) {
          notesList.innerHTML = "<div style='font-size:11px;color:var(--text-soft);'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ÙˆØªØ§Øª Ø¨Ø¹Ø¯ â€“ Ø§Ø¨Ø¯Ø£ Ø¨Ù†ÙˆØªØ© Ø¬Ø¯ÙŠØ¯Ø©.</div>";
          return;
        }

        snap.forEach(docSnap => {
          const data = docSnap.data();
          const card = document.createElement("div");
          card.className = "note-card";
          card.dataset.id = docSnap.id;
          card.dataset.payload = JSON.stringify({
            title: data.title || "",
            body: data.body || "",
            img: data.img || "",
            fontSize: data.fontSize || "15",
            fontColor: data.fontColor || "#ffffff",
            bgColor: data.bgColor || "#020617",
          });

          const titleEl = document.createElement("div");
          titleEl.className = "note-card-title";
          titleEl.textContent = data.title || "Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†";

          const metaEl = document.createElement("div");
          metaEl.className = "note-card-meta";
          metaEl.innerHTML =
            `<span>${(data.body || "").slice(0, 24) || "Ø¨Ø¯ÙˆÙ† Ù…Ø­ØªÙˆÙ‰"}</span>` +
            `<span>${data.updatedAt ? new Date(data.updatedAt.toDate()).toLocaleDateString("ar-JO",{day:"numeric",month:"short"}) : ""}</span>`;

          card.appendChild(titleEl);
          card.appendChild(metaEl);
          notesList.appendChild(card);

          card.addEventListener("click", () => {
            const payload = JSON.parse(card.dataset.payload);
            currentNoteId = card.dataset.id;
            noteTitle.value = payload.title;
            noteBody.value = payload.body;
            noteImageUrl.value = payload.img;
            fontSizeSelect.value = payload.fontSize;
            fontColorInput.value = payload.fontColor;
            bgColorInput.value = payload.bgColor;
            applyNoteStyles();
            if (payload.img) {
              notePreviewImg.src = payload.img;
              notePreviewImg.classList.remove("hidden");
            } else {
              notePreviewImg.classList.add("hidden");
            }
          });
        });
      } catch (err) {
        console.error(err);
        notesList.innerHTML = "<div style='font-size:11px;color:var(--text-soft);'>ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ÙˆØªØ§Øª. ØªØ£ÙƒØ¯ Ø£Ù† Firestore Ù…ÙØ¹Ù‘Ù„ ÙÙŠ Firebase.</div>";
      }
    }

    // ØªØ·Ø¨ÙŠÙ‚ Ø³ØªØ§ÙŠÙ„ Ù…Ø¨Ø¯Ø¦ÙŠ
    applyNoteStyles();
  </script>
</body>
</html>

