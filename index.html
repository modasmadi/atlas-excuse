<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ATLAS Focus Hub â€“ ØºØ±ÙØ© ØªØ±ÙƒÙŠØ² ÙŠÙˆÙ…ÙŠØ©</title>
  <style>
    :root {
      --bg: #050815;
      --bg-soft: #070b18;
      --card: #0b1020;
      --accent: #18b4ff;
      --accent-soft: rgba(24, 180, 255, 0.15);
      --text: #f9fafb;
      --text-soft: #9ca3c8;
      --border: #1f2937;
      --danger: #fb7185;
      --radius-lg: 20px;
      --radius-xl: 26px;
      --shadow: 0 18px 40px rgba(0, 0, 0, 0.4);
      --font-main: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      --transition: 0.18s ease-out;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--font-main);
      background: radial-gradient(circle at top, #101735 0, #050815 45%, #02030a 100%);
      color: var(--text);
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .shell {
      width: 100%;
      max-width: 1100px;
      background: linear-gradient(145deg, #060a18 0, #050815 30%, #02040c 100%);
      border-radius: 28px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: var(--shadow);
      padding: 18px 18px 22px;
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 900px) {
      .shell {
        padding: 22px 24px 26px;
      }
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0 0, rgba(24, 180, 255, 0.12), transparent 60%),
        radial-gradient(circle at 100% 0, rgba(88, 101, 242, 0.15), transparent 55%);
      opacity: 0.7;
      pointer-events: none;
    }

    .inner {
      position: relative;
      z-index: 1;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 18px;
      flex-wrap: wrap;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #39f, #18b4ff 30%, #0b89ff 60%, #141b3d 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 22px;
      color: #03101b;
      box-shadow: 0 0 0 3px rgba(24, 180, 255, 0.25);
    }

    .brand-title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.04em;
    }

    .brand-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .right-header {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      padding: 4px 10px;
      background: rgba(5, 10, 25, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.3);
      font-size: 11px;
      color: var(--text-soft);
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    .lang-toggle {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 3px;
      background: rgba(5, 10, 25, 0.96);
      gap: 3px;
    }

    .lang-btn {
      border: none;
      border-radius: 999px;
      padding: 4px 9px;
      background: transparent;
      color: var(--text-soft);
      font-size: 11px;
      cursor: pointer;
      transition: background var(--transition), color var(--transition);
    }

    .lang-btn.active {
      background: var(--accent);
      color: #03101b;
      font-weight: 600;
    }

    /* NAV */
    .main-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 14px;
    }

    .nav-btn {
      border: none;
      border-radius: 999px;
      padding: 7px 13px;
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-soft);
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background var(--transition), color var(--transition),
        transform 0.1s ease-out;
    }

    .nav-btn span.icon {
      font-size: 15px;
    }

    .nav-btn.active {
      background: var(--accent);
      color: #02101b;
      font-weight: 600;
      transform: translateY(-1px);
    }

    .nav-btn:hover {
      background: #111827;
    }

    /* LAYOUT */
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.2fr);
      gap: 14px;
    }

    @media (max-width: 850px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at top left, rgba(24, 180, 255, 0.14), transparent 40%),
        linear-gradient(145deg, #080e20, #050815);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(148, 163, 184, 0.22);
      padding: 16px 14px 16px;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 120% -10%, rgba(88, 101, 242, 0.15), transparent 45%);
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    .card-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-sub {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 12px;
      line-height: 1.6;
    }

    .badge-soft {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-soft);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 700px) {
      .grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* TIMER */
    .focus-timer {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 8px;
    }

    .timer-display {
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 0.12em;
      padding: 10px 14px;
      border-radius: 18px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.35);
      text-align: center;
    }

    .timer-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      background: var(--accent);
      color: #03101b;
      font-weight: 600;
      box-shadow: 0 12px 26px rgba(24, 180, 255, 0.55);
      transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
        background var(--transition);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(24, 180, 255, 0.65);
    }

    .btn.secondary {
      background: rgba(15, 23, 42, 0.98);
      color: var(--text-soft);
      box-shadow: none;
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .btn.secondary:hover {
      background: #111827;
    }

    .btn.small {
      padding: 5px 10px;
      font-size: 11px;
      box-shadow: none;
    }

    .btn.small.primary-soft {
      background: rgba(24, 180, 255, 0.15);
      color: var(--accent);
      border: 1px solid rgba(24, 180, 255, 0.6);
    }

    .btn-icon {
      font-size: 16px;
    }

    .timer-input-row {
      display: flex;
      gap: 6px;
      align-items: center;
      font-size: 11px;
      color: var(--text-soft);
      flex-wrap: wrap;
    }

    .timer-input-row input {
      width: 70px;
      padding: 4px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      font-family: var(--font-main);
      font-size: 11px;
      text-align: center;
      outline: none;
    }

    .timer-input-row input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(24, 180, 255, 0.45);
    }

    .focus-status {
      font-size: 11px;
      color: var(--text-soft);
    }

    .stats-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .stats-pill {
      border-radius: 999px;
      padding: 4px 9px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(148, 163, 184, 0.45);
    }

    /* TASKS */
    .task-input-row {
      display: flex;
      gap: 6px;
      margin-bottom: 8px;
    }

    .task-input-row input {
      flex: 1;
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      font-size: 12px;
      outline: none;
    }

    .task-input-row input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(24, 180, 255, 0.5);
    }

    .task-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      max-height: 210px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .task-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 7px 9px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 12px;
    }

    .task-item input[type="checkbox"] {
      width: 14px;
      height: 14px;
      accent-color: var(--accent);
      cursor: pointer;
    }

    .task-text {
      flex: 1;
      word-break: break-word;
    }

    .task-text.done {
      text-decoration: line-through;
      color: #6b7280;
    }

    .task-del {
      border: none;
      background: transparent;
      color: var(--text-soft);
      font-size: 14px;
      cursor: pointer;
      padding: 0 3px;
    }

    .tagline {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 6px;
    }

    /* STUDY PLAN */
    .field-label {
      font-size: 11px;
      margin-bottom: 4px;
      color: var(--text-soft);
    }

    .field-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .field-row input {
      padding: 6px 8px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      font-family: var(--font-main);
      font-size: 12px;
      outline: none;
    }

    .field-row input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(24, 180, 255, 0.5);
    }

    .study-plan-output {
      background: rgba(15, 23, 42, 0.98);
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 9px 10px;
      font-size: 12px;
      line-height: 1.7;
      white-space: pre-line;
      margin-top: 4px;
    }

    /* MOOD */
    .mood-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 12px;
      color: var(--text-soft);
      flex-wrap: wrap;
    }

    .mood-row input[type="range"] {
      flex: 1;
      accent-color: var(--accent);
    }

    .mood-label {
      min-width: 70px;
      text-align: center;
      font-weight: 600;
      font-size: 11px;
    }

    .mood-advice {
      background: rgba(15, 23, 42, 0.98);
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 9px 10px;
      font-size: 12px;
      line-height: 1.7;
    }

    /* NOTES */
    textarea {
      width: 100%;
      min-height: 110px;
      resize: vertical;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      padding: 8px 9px;
      font-size: 12px;
      font-family: var(--font-main);
      outline: none;
    }

    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(24, 180, 255, 0.5);
    }

    .note-status {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 4px;
    }

    /* RIGHT SIDE MINI SECTIONS */
    .mini-card {
      background: rgba(7, 11, 24, 0.98);
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.32);
      padding: 10px 11px;
      margin-bottom: 10px;
      font-size: 12px;
    }

    .mini-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .mini-title {
      font-size: 12px;
      font-weight: 600;
    }

    .mini-text {
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.7;
      white-space: pre-line;
    }

    .counter {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
    }

    footer {
      margin-top: 10px;
      font-size: 10px;
      color: var(--text-soft);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
<div class="shell">
  <div class="inner">
    <header>
      <div class="brand">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-title" data-i18n="app_name">ATLAS Focus Hub</div>
          <div class="brand-sub" data-i18n="app_tagline">
            ØºØ±ÙØ© ØªØ±ÙƒÙŠØ² Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ÙŠÙˆÙ…: Ù…Ù‡Ø§Ù…ØŒ Ø¬Ù„Ø³Ø§ØªØŒ Ù…Ø²Ø§Ø¬ØŒ ÙˆÙ†ÙˆØªØ§Øª.
          </div>
        </div>
      </div>
      <div class="right-header">
        <div class="pill">
          <span class="pill-dot"></span>
          <span data-i18n="status_live">ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† 24/7 Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</span>
        </div>
        <div class="lang-toggle">
          <button class="lang-btn active" data-lang="ar">AR</button>
          <button class="lang-btn" data-lang="en">EN</button>
        </div>
      </div>
    </header>

    <nav class="main-nav">
      <button class="nav-btn active" data-section-btn="focus">
        <span class="icon">ğŸ¯</span><span data-i18n="nav_focus">ØªØ±ÙƒÙŠØ²</span>
      </button>
      <button class="nav-btn" data-section-btn="tasks">
        <span class="icon">âœ…</span><span data-i18n="nav_tasks">Ù…Ù‡Ø§Ù…ÙŠ</span>
      </button>
      <button class="nav-btn" data-section-btn="study">
        <span class="icon">ğŸ“š</span><span data-i18n="nav_study">Ø®Ø·Ø© Ø¯Ø±Ø§Ø³Ø©</span>
      </button>
      <button class="nav-btn" data-section-btn="mood">
        <span class="icon">ğŸ’­</span><span data-i18n="nav_mood">Ù…Ø²Ø§Ø¬ÙŠ</span>
      </button>
      <button class="nav-btn" data-section-btn="notes">
        <span class="icon">ğŸ“</span><span data-i18n="nav_notes">Ù†ÙˆØªØ© Ø§Ù„ÙŠÙˆÙ…</span>
      </button>
    </nav>

    <div class="layout">
      <!-- LEFT -->
      <div>
        <!-- FOCUS -->
        <section id="section-focus" class="section active">
          <div class="card">
            <div class="card-inner">
              <div class="card-title">
                <span>ğŸ¯</span>
                <span data-i18n="focus_title">ØºØ±ÙØ© Ø§Ù„ØªØ±ÙƒÙŠØ²</span>
              </div>
              <div class="card-sub" data-i18n="focus_sub">
                Ø§Ø®ØªØ± Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ Ø´ØºÙ‘Ù„ Ø§Ù„Ù…Ø¤Ù‚ØªØŒ ÙˆØ£Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø´ØªØªØ§Øªâ€¦ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ­Ø³Ø¨ Ù„Ùƒ Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆÙŠØ°ÙƒØ±Ùƒ Ø¥Ù†Ùƒ Ø£Ù†Ø¬Ø²Øª.
              </div>

              <div class="grid-2">
                <div class="focus-timer">
                  <div class="timer-display" id="timer-display">25:00</div>
                  <div class="timer-controls">
                    <button class="btn" id="btn-start">
                      <span class="btn-icon">â–¶</span>
                      <span data-i18n="btn_start">Ø¨Ø¯Ø¡</span>
                    </button>
                    <button class="btn secondary" id="btn-pause">
                      <span class="btn-icon">â¸</span>
                      <span data-i18n="btn_pause">Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</span>
                    </button>
                    <button class="btn secondary" id="btn-reset">
                      <span class="btn-icon">â†º</span>
                      <span data-i18n="btn_reset">ØªØµÙÙŠØ±</span>
                    </button>
                  </div>
                  <div class="timer-input-row">
                    <span data-i18n="focus_minutes">Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© (Ø¯Ù‚Ø§Ø¦Ù‚):</span>
                    <input id="focus-minutes" type="number" min="5" max="180" value="25">
                    <button class="btn small primary-soft" data-preset="25">25</button>
                    <button class="btn small primary-soft" data-preset="45">45</button>
                    <button class="btn small primary-soft" data-preset="60">60</button>
                  </div>
                  <div class="focus-status" id="focus-status" data-i18n="focus_status_idle">
                    Ø¬Ø§Ù‡Ø² Ù„Ø£ÙˆÙ„ Ø¬Ù„Ø³Ø© Ø§Ù„ÙŠÙˆÙ… âœ¨
                  </div>
                  <div class="stats-row">
                    <div class="stats-pill">
                      <span data-i18n="focus_today">Ø¬Ù„Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…:</span>
                      <span id="focus-today-count">0</span>
                    </div>
                    <div class="stats-pill">
                      <span data-i18n="focus_total">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬Ù„Ø³Ø§Øª:</span>
                      <span id="focus-total-count">0</span>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="badge-soft" style="margin-bottom:6px;">
                    <span>ğŸ’¡</span>
                    <span data-i18n="focus_tips_title">Ù†ØµÙŠØ­Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø¬Ù„Ø³Ø©</span>
                  </div>
                  <div class="mini-text" id="focus-tip-text">
                    1. Ø­Ø· Ø§Ù„Ø¬ÙˆØ§Ù„ Ø¨Ø¹ÙŠØ¯ Ø¹Ù† ÙŠØ¯Ùƒ.  
                    2. Ø§ÙØªØ­ ÙÙ‚Ø· Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ù„ÙŠ ØªØ­ØªØ§Ø¬Ù‡ ÙÙŠ Ø§Ù„Ø¬Ù„Ø³Ø©.  
                    3. Ø¨Ø¹Ø¯ Ù…Ø§ ÙŠØ®Ù„Øµ Ø§Ù„Ù…Ø¤Ù‚ØªØŒ Ø®Ø° Ø¯Ù‚ÙŠÙ‚Ø© ØªÙ…Ø¯Ù‘Ø¯ Ø£Ùˆ ØªÙ…Ø´ÙŠ Ø´ÙˆÙŠ.
                  </div>
                  <button class="btn small secondary" id="btn-new-tip" style="margin-top:8px;">
                    <span class="btn-icon">ğŸ”</span>
                    <span data-i18n="btn_new_tip">Ù†ØµÙŠØ­Ø© Ø£Ø®Ø±Ù‰</span>
                  </button>
                  <div class="tagline" data-i18n="focus_disclaimer">
                    Ù‡Ø°Ø§ Ù„ÙŠØ³ Ù†Ø¸Ø§Ù… Ø¯Ø±Ø§Ø³Ø© Ù…Ø¹Ù‚Ù‘Ø¯â€¦ ÙÙ‚Ø· ØºØ±ÙØ© Ø¨Ø³ÙŠØ·Ø© ØªØ°ÙƒÙ‘Ø±Ùƒ Ø¥Ù† ÙƒÙ„ Ø¬Ù„Ø³Ø© ØªØ±ÙƒÙŠØ² ØµØºÙŠØ±Ø©
                    ØªÙØ±Ù‚ ÙÙŠ ØªØ±Ø§ÙƒÙ…Ù‡Ø§.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- TASKS -->
        <section id="section-tasks" class="section">
          <div class="card">
            <div class="card-inner">
              <div class="card-title">
                <span>âœ…</span>
                <span data-i18n="tasks_title">Ù…Ù‡Ø§Ù…ÙŠ Ø§Ù„ÙŠÙˆÙ…</span>
              </div>
              <div class="card-sub" data-i18n="tasks_sub">
                Ø§ÙƒØªØ¨ 3â€“7 Ù…Ù‡Ø§Ù… ÙÙ‚Ø·â€¦ Ù…Ùˆ Ù„Ø§Ø²Ù… ØªØ®Ù„Øµ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙƒÙ„Ù‡Ø§ ÙÙŠ ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯.
              </div>

              <div class="task-input-row">
                <input id="task-input" type="text" data-i18n-placeholder="tasks_placeholder"
                       placeholder="Ø§ÙƒØªØ¨ Ù…Ù‡Ù…Ø©â€¦ Ù…Ø«Ø§Ù„: Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ­Ø¯Ø© 3">
                <button class="btn small" id="btn-add-task">
                  <span class="btn-icon">ï¼‹</span>
                  <span data-i18n="btn_add_task">Ø¥Ø¶Ø§ÙØ©</span>
                </button>
              </div>
              <div class="task-list" id="task-list"></div>
              <div class="tagline" data-i18n="tasks_hint">
                Ø¬Ø±Ù‘Ø¨ ÙƒÙ„ ØµØ¨Ø§Ø­ ØªÙƒØªØ¨ Ø£Ù‡Ù… 3 Ù…Ù‡Ø§Ù…â€¦ Ù„Ùˆ Ø®Ù„ØµØªÙ‡Ù… ÙŠØ¹ØªØ¨Ø± Ø§Ù„ÙŠÙˆÙ… Ù†Ø§Ø¬Ø­ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ Ø£Ù†Ø¬Ø²Øª ØºÙŠØ±Ù‡Ù….
              </div>
            </div>
          </div>
        </section>

        <!-- STUDY PLAN -->
        <section id="section-study" class="section">
          <div class="card">
            <div class="card-inner">
              <div class="card-title">
                <span>ğŸ“š</span>
                <span data-i18n="study_title">Ø®Ø·Ø© Ø¯Ø±Ø§Ø³Ø© Ø³Ø±ÙŠØ¹Ø©</span>
              </div>
              <div class="card-sub" data-i18n="study_sub">
                Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ÙˆØªØ§Ø±ÙŠØ®Ù‡â€¦ Ù†Ø¹Ø·ÙŠÙƒ ØµÙˆØ±Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©.
              </div>

              <div class="field-row">
                <input id="exam-name" type="text" style="flex:2;"
                       data-i18n-placeholder="study_exam_placeholder"
                       placeholder="Ø§Ø³Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†â€¦ Ù…Ø«Ù„: ØªÙˆØ¬ÙŠÙ‡ÙŠ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">
                <input id="exam-date" type="date" style="flex:1;">
                <input id="study-hours" type="number" min="1" max="10" value="3" style="width:80px;"
                       data-i18n-placeholder="study_hours_placeholder"
                       placeholder="Ø³Ø§Ø¹Ø§Øª/ÙŠÙˆÙ…">
              </div>
              <button class="btn small" id="btn-generate-plan">
                <span class="btn-icon">ğŸ“…</span>
                <span data-i18n="btn_plan">Ø§Ø¹Ù…Ù„ Ø®Ø·Ø©</span>
              </button>

              <div class="study-plan-output" id="study-output" style="margin-top:8px;"></div>
              <div class="tagline" data-i18n="study_note">
                Ø§Ù„Ø®Ø·Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ©â€¦ Ø¹Ø¯Ù‘Ù„Ù‡Ø§ Ø­Ø³Ø¨ Ø¸Ø±ÙˆÙÙƒ ÙˆÙ‚Ø¯Ø±ØªÙƒ Ø§Ù„ÙØ¹Ù„ÙŠØ©.
              </div>
            </div>
          </div>
        </section>

        <!-- MOOD -->
        <section id="section-mood" class="section">
          <div class="card">
            <div class="card-inner">
              <div class="card-title">
                <span>ğŸ’­</span>
                <span data-i18n="mood_title">Ù…Ø²Ø§Ø¬ÙŠ Ø§Ù„ÙŠÙˆÙ…</span>
              </div>
              <div class="card-sub" data-i18n="mood_sub">
                Ù‚ÙŠÙ‘Ù… Ø´Ø¹ÙˆØ±Ùƒ Ù…Ù† 1 Ø¥Ù„Ù‰ 5â€¦ ÙˆØ®Ø° Ø¬Ù…Ù„Ø© Ø¨Ø³ÙŠØ·Ø© ØªÙ†Ø§Ø³Ø¨ Ù…Ø²Ø§Ø¬Ùƒ (Ù‡Ø°Ø§ Ù„ÙŠØ³ ØªØ´Ø®ÙŠØµØ§Ù‹ Ø·Ø¨ÙŠØ§Ù‹).
              </div>

              <div class="mood-row">
                <span data-i18n="mood_label">Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¢Ù†:</span>
                <input id="mood-slider" type="range" min="1" max="5" value="3" />
                <span class="mood-label" id="mood-level-label">3 / 5</span>
              </div>
              <div class="mood-advice" id="mood-advice-text"></div>
            </div>
          </div>
        </section>

        <!-- NOTES -->
        <section id="section-notes" class="section">
          <div class="card">
            <div class="card-inner">
              <div class="card-title">
                <span>ğŸ“</span>
                <span data-i18n="notes_title">Ù†ÙˆØªØ© Ø§Ù„ÙŠÙˆÙ…</span>
              </div>
              <div class="card-sub" data-i18n="notes_sub">
                Ø£ÙŠ ÙÙƒØ±Ø©ØŒ Ø®ÙˆÙØŒ Ù‡Ø¯ÙØŒ Ø£Ùˆ Ø´ÙŠØ¡ Ø¨Ø³ÙŠØ· Ù„Ù„ÙŠÙˆÙ…â€¦ Ø§ÙƒØªØ¨Ù‡ Ù‡Ù†Ø§ ÙˆØ®Ù„ÙŠÙ‡ ÙŠØ·Ù„Ø¹ Ù…Ù† Ø±Ø£Ø³Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©.
              </div>

              <textarea id="notes-input" data-i18n-placeholder="notes_placeholder"
                        placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ø£Ù‡Ù… Ù…Ø§ ÙÙŠ Ø¨Ø§Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…â€¦"></textarea>
              <div class="note-status" id="notes-status"></div>
            </div>
          </div>
        </section>
      </div>

      <!-- RIGHT -->
      <div>
        <div class="mini-card">
          <div class="mini-header">
            <div>
              <div class="mini-title" data-i18n="stats_title">Ø¹Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</div>
            </div>
            <div class="counter" id="counter-total">0</div>
          </div>
          <div class="mini-text" data-i18n="stats_text">
            Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ Ù…Ø­ÙÙˆØ¸ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­.  
            Ø§Ù„Ù‡Ø¯Ù Ù…Ø´ Ø§Ù„ÙƒÙ…Ø§Ù„â€¦ Ø§Ù„Ù‡Ø¯Ù ØªØ´ÙˆÙ Ø¥Ù† ÙƒÙ„ Ø¬Ù„Ø³Ø© ØµØºÙŠØ±Ø© ØªÙØ­Ø³Ø¨.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-header">
            <div class="mini-title" data-i18n="how_title">ÙƒÙŠÙ ØªØ³ØªÙÙŠØ¯ Ù…Ù† ATLAS Focus HubØŸ</div>
          </div>
          <div class="mini-text" id="how-text">
            1. Ø§Ø®ØªØ± Ø¬Ù„Ø³Ø© ØªØ±ÙƒÙŠØ² ÙˆØ§Ø´ØªØºÙ„ Ø¨Ù„Ø§ Ù…Ø´ØªØªØ§Øª.  
            2. Ø§ÙƒØªØ¨ 3 Ù…Ù‡Ø§Ù… Ù…Ù‡Ù…Ø© ÙÙ‚Ø· Ù„Ù„ÙŠÙˆÙ….  
            3. Ø­Ø¯Ù‘Ø¯ Ù…Ø²Ø§Ø¬Ùƒ ÙˆØ´ÙˆÙ Ø§Ù„Ù†ØµÙŠØ­Ø©.  
            4. Ø³Ø¬Ù‘Ù„ Ø£ÙŠ ÙÙƒØ±Ø© ÙÙŠ Ø§Ù„Ù†ÙˆØªØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ØªØ±ÙƒÙ‡Ø§ ØªØ²Ø¹Ø¬Ùƒ ÙÙŠ Ø±Ø£Ø³Ùƒ.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-header">
            <div class="mini-title" data-i18n="future_title">Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹â€¦</div>
          </div>
          <div class="mini-text" data-i18n="future_text">
            â€“ Ù‚Ø³Ù… Ø®Ø§Øµ Ù„Ù„Ø·Ù„Ø§Ø¨ (ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ø¯ + Ø¨Ù†Ùƒ Ø£ÙÙƒØ§Ø± Ù…ÙƒØ§ÙØ£Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²).  
            â€“ Ø£ÙÙƒØ§Ø± Ù„Ù„Ø¬ÙŠÙ…Ø±Ø²: Ø§Ù„Ø¹Ø¨ Ø¨Ø¹Ø¯ Ø¹Ø¯Ø¯ Ù…Ø¹ÙŠÙ‘Ù† Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙƒØ¬Ø§Ø¦Ø²Ø© ğŸ®  
            â€“ ØµÙØ­Ø© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù…Ø³ØªÙ‚Ù„Ø© Ù„Ù„ÙŠ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø¯ÙˆÙ„ Ø«Ø§Ù†ÙŠØ© ğŸŒ
          </div>
        </div>
      </div>
    </div>

    <footer>
      <span data-i18n="footer_left">
        Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ ÙˆÙ…Ø¬Ø§Ù†ÙŠ â€“ Ø´ØºÙ‘Ù„Ù‡ Ù…Ù† Ø£ÙŠ Ù…ØªØµÙØ­ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„.
      </span>
      <span data-i18n="footer_right">
        Ù„Ùˆ Ù†Ø§Ø³Ø¨Ùƒâ€¦ Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø´Ø®Øµ ÙŠØ­ØªØ§Ø¬ ÙŠØ±ÙƒÙ‘Ø² Ø´ÙˆÙŠ Ø§Ù„ÙŠÙˆÙ… ğŸ¤
      </span>
    </footer>
  </div>
</div>

<script>
  // --------- i18n TEXTS ----------
  const I18N = {
    ar: {
      app_name: "ATLAS Focus Hub",
      app_tagline: "ØºØ±ÙØ© ØªØ±ÙƒÙŠØ² Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ÙŠÙˆÙ…: Ù…Ù‡Ø§Ù…ØŒ Ø¬Ù„Ø³Ø§ØªØŒ Ù…Ø²Ø§Ø¬ØŒ ÙˆÙ†ÙˆØªØ§Øª.",
      status_live: "ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† 24/7 Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ",
      nav_focus: "ØªØ±ÙƒÙŠØ²",
      nav_tasks: "Ù…Ù‡Ø§Ù…ÙŠ",
      nav_study: "Ø®Ø·Ø© Ø¯Ø±Ø§Ø³Ø©",
      nav_mood: "Ù…Ø²Ø§Ø¬ÙŠ",
      nav_notes: "Ù†ÙˆØªØ© Ø§Ù„ÙŠÙˆÙ…",

      focus_title: "ØºØ±ÙØ© Ø§Ù„ØªØ±ÙƒÙŠØ²",
      focus_sub: "Ø§Ø®ØªØ± Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ Ø´ØºÙ‘Ù„ Ø§Ù„Ù…Ø¤Ù‚ØªØŒ ÙˆØ£Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø´ØªØªØ§Øªâ€¦ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ­Ø³Ø¨ Ù„Ùƒ Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆÙŠØ°ÙƒØ±Ùƒ Ø¥Ù†Ùƒ Ø£Ù†Ø¬Ø²Øª.",
      btn_start: "Ø¨Ø¯Ø¡",
      btn_pause: "Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª",
      btn_reset: "ØªØµÙÙŠØ±",
      focus_minutes: "Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© (Ø¯Ù‚Ø§Ø¦Ù‚):",
      focus_status_idle: "Ø¬Ø§Ù‡Ø² Ù„Ø£ÙˆÙ„ Ø¬Ù„Ø³Ø© Ø§Ù„ÙŠÙˆÙ… âœ¨",
      focus_today: "Ø¬Ù„Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…:",
      focus_total: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬Ù„Ø³Ø§Øª:",
      focus_tips_title: "Ù†ØµÙŠØ­Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø¬Ù„Ø³Ø©",
      btn_new_tip: "Ù†ØµÙŠØ­Ø© Ø£Ø®Ø±Ù‰",
      focus_disclaimer: "Ù‡Ø°Ø§ Ù„ÙŠØ³ Ù†Ø¸Ø§Ù… Ø¯Ø±Ø§Ø³Ø© Ù…Ø¹Ù‚Ù‘Ø¯â€¦ ÙÙ‚Ø· ØºØ±ÙØ© Ø¨Ø³ÙŠØ·Ø© ØªØ°ÙƒÙ‘Ø±Ùƒ Ø¥Ù† ÙƒÙ„ Ø¬Ù„Ø³Ø© ØªØ±ÙƒÙŠØ² ØµØºÙŠØ±Ø© ØªÙØ±Ù‚ ÙÙŠ ØªØ±Ø§ÙƒÙ…Ù‡Ø§.",

      tasks_title: "Ù…Ù‡Ø§Ù…ÙŠ Ø§Ù„ÙŠÙˆÙ…",
      tasks_sub: "Ø§ÙƒØªØ¨ 3â€“7 Ù…Ù‡Ø§Ù… ÙÙ‚Ø·â€¦ Ù…Ùˆ Ù„Ø§Ø²Ù… ØªØ®Ù„Øµ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙƒÙ„Ù‡Ø§ ÙÙŠ ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯.",
      tasks_placeholder: "Ø§ÙƒØªØ¨ Ù…Ù‡Ù…Ø©â€¦ Ù…Ø«Ø§Ù„: Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ­Ø¯Ø© 3",
      btn_add_task: "Ø¥Ø¶Ø§ÙØ©",
      tasks_hint: "Ø¬Ø±Ù‘Ø¨ ÙƒÙ„ ØµØ¨Ø§Ø­ ØªÙƒØªØ¨ Ø£Ù‡Ù… 3 Ù…Ù‡Ø§Ù…â€¦ Ù„Ùˆ Ø®Ù„ØµØªÙ‡Ù… ÙŠØ¹ØªØ¨Ø± Ø§Ù„ÙŠÙˆÙ… Ù†Ø§Ø¬Ø­ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ Ø£Ù†Ø¬Ø²Øª ØºÙŠØ±Ù‡Ù….",

      study_title: "Ø®Ø·Ø© Ø¯Ø±Ø§Ø³Ø© Ø³Ø±ÙŠØ¹Ø©",
      study_sub: "Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ÙˆØªØ§Ø±ÙŠØ®Ù‡â€¦ Ù†Ø¹Ø·ÙŠÙƒ ØµÙˆØ±Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©.",
      study_exam_placeholder: "Ø§Ø³Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†â€¦ Ù…Ø«Ù„: ØªÙˆØ¬ÙŠÙ‡ÙŠ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ",
      study_hours_placeholder: "Ø³Ø§Ø¹Ø§Øª/ÙŠÙˆÙ…",
      btn_plan: "Ø§Ø¹Ù…Ù„ Ø®Ø·Ø©",
      study_note: "Ø§Ù„Ø®Ø·Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ©â€¦ Ø¹Ø¯Ù‘Ù„Ù‡Ø§ Ø­Ø³Ø¨ Ø¸Ø±ÙˆÙÙƒ ÙˆÙ‚Ø¯Ø±ØªÙƒ Ø§Ù„ÙØ¹Ù„ÙŠØ©.",

      mood_title: "Ù…Ø²Ø§Ø¬ÙŠ Ø§Ù„ÙŠÙˆÙ…",
      mood_sub: "Ù‚ÙŠÙ‘Ù… Ø´Ø¹ÙˆØ±Ùƒ Ù…Ù† 1 Ø¥Ù„Ù‰ 5â€¦ ÙˆØ®Ø° Ø¬Ù…Ù„Ø© Ø¨Ø³ÙŠØ·Ø© ØªÙ†Ø§Ø³Ø¨ Ù…Ø²Ø§Ø¬Ùƒ (Ù‡Ø°Ø§ Ù„ÙŠØ³ ØªØ´Ø®ÙŠØµØ§Ù‹ Ø·Ø¨ÙŠØ§Ù‹).",
      mood_label: "Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¢Ù†:",

      notes_title: "Ù†ÙˆØªØ© Ø§Ù„ÙŠÙˆÙ…",
      notes_sub: "Ø£ÙŠ ÙÙƒØ±Ø©ØŒ Ø®ÙˆÙØŒ Ù‡Ø¯ÙØŒ Ø£Ùˆ Ø´ÙŠØ¡ Ø¨Ø³ÙŠØ· Ù„Ù„ÙŠÙˆÙ…â€¦ Ø§ÙƒØªØ¨Ù‡ Ù‡Ù†Ø§ ÙˆØ®Ù„ÙŠÙ‡ ÙŠØ·Ù„Ø¹ Ù…Ù† Ø±Ø£Ø³Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©.",
      notes_placeholder: "Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ø£Ù‡Ù… Ù…Ø§ ÙÙŠ Ø¨Ø§Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…â€¦",

      stats_title: "Ø¹Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ",
      stats_text: "Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ Ù…Ø­ÙÙˆØ¸ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­.\nØ§Ù„Ù‡Ø¯Ù Ù…Ø´ Ø§Ù„ÙƒÙ…Ø§Ù„â€¦ Ø§Ù„Ù‡Ø¯Ù ØªØ´ÙˆÙ Ø¥Ù† ÙƒÙ„ Ø¬Ù„Ø³Ø© ØµØºÙŠØ±Ø© ØªÙØ­Ø³Ø¨.",
      how_title: "ÙƒÙŠÙ ØªØ³ØªÙÙŠØ¯ Ù…Ù† ATLAS Focus HubØŸ",
      future_title: "Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹â€¦",
      future_text: "â€“ Ù‚Ø³Ù… Ø®Ø§Øµ Ù„Ù„Ø·Ù„Ø§Ø¨ (ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ø¯ + Ø¨Ù†Ùƒ Ø£ÙÙƒØ§Ø± Ù…ÙƒØ§ÙØ£Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²).\nâ€“ Ø£ÙÙƒØ§Ø± Ù„Ù„Ø¬ÙŠÙ…Ø±Ø²: Ø§Ù„Ø¹Ø¨ Ø¨Ø¹Ø¯ Ø¹Ø¯Ø¯ Ù…Ø¹ÙŠÙ‘Ù† Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙƒØ¬Ø§Ø¦Ø²Ø© ğŸ®\nâ€“ ØµÙØ­Ø© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù…Ø³ØªÙ‚Ù„Ø© Ù„Ù„ÙŠ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø¯ÙˆÙ„ Ø«Ø§Ù†ÙŠØ© ğŸŒ",
      footer_left: "Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ ÙˆÙ…Ø¬Ø§Ù†ÙŠ â€“ Ø´ØºÙ‘Ù„Ù‡ Ù…Ù† Ø£ÙŠ Ù…ØªØµÙØ­ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„.",
      footer_right: "Ù„Ùˆ Ù†Ø§Ø³Ø¨Ùƒâ€¦ Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø´Ø®Øµ ÙŠØ­ØªØ§Ø¬ ÙŠØ±ÙƒÙ‘Ø² Ø´ÙˆÙŠ Ø§Ù„ÙŠÙˆÙ… ğŸ¤"
    },
    en: {
      app_name: "ATLAS Focus Hub",
      app_tagline: "A simple focus room for your day: sessions, tasks, mood, and notes.",
      status_live: "Running 24/7 in your browser",
      nav_focus: "Focus",
      nav_tasks: "Tasks",
      nav_study: "Study Plan",
      nav_mood: "Mood",
      nav_notes: "Todayâ€™s Note",

      focus_title: "Focus Room",
      focus_sub: "Pick a session length, start the timer, and remove distractionsâ€¦ the site counts your sessions and reminds you that you actually did something.",
      btn_start: "Start",
      btn_pause: "Pause",
      btn_reset: "Reset",
      focus_minutes: "Session length (minutes):",
      focus_status_idle: "Ready for your first session today âœ¨",
      focus_today: "Sessions today:",
      focus_total: "Total sessions:",
      focus_tips_title: "Quick tip for this session",
      btn_new_tip: "Another tip",
      focus_disclaimer: "This isnâ€™t a complex study system â€“ just a small room that reminds you every focused session counts.",

      tasks_title: "Todayâ€™s Tasks",
      tasks_sub: "Write 3â€“7 tasks onlyâ€¦ you donâ€™t have to finish the entire universe in one day.",
      tasks_placeholder: "Type a taskâ€¦ e.g. Review Unit 3",
      btn_add_task: "Add",
      tasks_hint: "Try writing 3 key tasks every morning â€“ if you finish them, the day is a win even if nothing else happens.",

      study_title: "Quick Study Plan",
      study_sub: "Enter the exam name and date â€“ youâ€™ll get an approximate number of days and suggested hours.",
      study_exam_placeholder: "Exam nameâ€¦ e.g. English final",
      study_hours_placeholder: "Hours/day",
      btn_plan: "Generate plan",
      study_note: "This plan is approximate â€“ adjust based on your real life and energy.",

      mood_title: "My Mood Today",
      mood_sub: "Rate how you feel from 1 to 5 and get a short line that fits your mood (not medical advice).",
      mood_label: "Mood now:",

      notes_title: "Todayâ€™s Note",
      notes_sub: "Any thought, worry, or goal for todayâ€¦ write it here instead of letting it spin in your head.",
      notes_placeholder: "Write the main things on your mind todayâ€¦",

      stats_title: "Focus sessions on this device",
      stats_text: "This number is stored only in this browser.\nThe point isnâ€™t perfection â€“ itâ€™s seeing that every small session counts.",
      how_title: "How to use ATLAS Focus Hub?",
      future_title: "Coming laterâ€¦",
      future_text: "â€“ Student area (subject breakdown + reward ideas after finishing).\nâ€“ Gamer ideas: unlock gaming after a certain number of sessions ğŸ®\nâ€“ Standalone English page for users around the world ğŸŒ",
      footer_left: "This site is experimental and free â€“ use it from any browser, no login needed.",
      footer_right: "If it helps you, share it with someone who needs a bit of focus today ğŸ¤"
    }
  };

  const focusTips = {
    ar: [
      "Ù‚Ø¨Ù„ Ù…Ø§ ØªØ¨Ø¯Ø£â€¦ Ø³ÙƒÙ‘Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© ÙˆØ®Ù„ÙŠ Ø´Ø§Ø´Ø© ÙˆØ­Ø¯Ø© Ù…ÙØªÙˆØ­Ø©.",
      "Ø§ÙƒØªØ¨ Ø¹Ù„Ù‰ ÙˆØ±Ù‚Ø© ØµØºÙŠØ±Ø©: Â«ÙÙŠ Ù‡Ø§ÙŠ Ø§Ù„Ø¬Ù„Ø³Ø© Ù‡Ø¯ÙÙŠâ€¦Â» ÙˆØ­Ø·Ù‡Ø§ Ù‚Ø¯Ø§Ù…Ùƒ.",
      "Ø§ØªÙÙ‚ Ù…Ø¹ Ù†ÙØ³Ùƒ Ø¥Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ù‚ØµÙŠØ±Ø©ØŒ Ø¨Ø¹Ø¯Ù‡Ø§ Ù…Ø³Ù…ÙˆØ­ Ù„Ùƒ ØªØ±ØªØ§Ø­ Ø¨Ø¯ÙˆÙ† ØªØ£Ù†ÙŠØ¨ Ø¶Ù…ÙŠØ±.",
      "Ù„Ùˆ ØªØ´Ø±Ø¯Øª ÙÙŠ Ø§Ù„Ù†ØµØŒ Ø¨Ø³ Ø±Ø¬Ù‘Ø¹ ØªØ±ÙƒÙŠØ²Ùƒ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªØ³Ø¨ Ù†ÙØ³Ùƒ â€“ Ù‡Ø°Ø§ Ø·Ø¨ÙŠØ¹ÙŠ.",
      "Ø®Ù„ÙŠ ÙƒÙˆØ¨ Ù…Ø§Ø¡ Ø¬Ù†Ø¨ÙƒØŒ Ù„Ø§ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆØ§Ù†Øª Ø¹Ø·Ø´Ø§Ù†."
    ],
    en: [
      "Before you start, close non-essential tabs and keep only one main window.",
      "Write on a small note: â€œIn this session my goal isâ€¦â€ and keep it in front of you.",
      "Remind yourself the session is short â€“ you can rest afterward without guilt.",
      "If your mind wanders, just gently pull it back. No self-insults needed.",
      "Keep a glass of water nearby so you donâ€™t interrupt yourself mid-session."
    ]
  };

  const moodTexts = {
    ar: {
      1: "ÙˆØ§Ø¶Ø­ Ø¥Ù†Ùƒ ØªØ¹Ø¨Ø§Ù† Ø¬Ø¯Ø§Ù‹ Ø§Ù„ÙŠÙˆÙ…. Ø­Ø§ÙˆÙ„ ØªØ®ÙÙ‘Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¹Ù„Ù‰ Ù†ÙØ³ÙƒØŒ Ø®Ø° Ø±Ø§Ø­Ø© Ø¨Ø³ÙŠØ·Ø©ØŒ ÙˆÙƒÙ„Ù‘Ù… Ø´Ø®Øµ ØªØ±ØªØ§Ø­ Ù„Ù‡ Ù„Ùˆ ØªÙ‚Ø¯Ø±.",
      2: "Ø§Ù„ÙŠÙˆÙ… Ø«Ù‚ÙŠÙ„ Ø´ÙˆÙŠâ€¦ Ø§Ø®ØªÙØ± Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© ØµØºÙŠØ±Ø© ÙÙ‚Ø·ØŒ ÙˆØ§Ù†Ø¬Ø²Ù‡Ø§ Ø¹Ø´Ø§Ù† ØªØ­Ø³ Ø¨Ø´Ø¹ÙˆØ± Ø¥Ù†Ùƒ Ù…Ø§ Ø¶ÙŠÙ‘Ø¹Øª Ø§Ù„ÙŠÙˆÙ… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.",
      3: "Ù…Ø²Ø§Ø¬ Ù…ØªÙˆØ³Ø·. Ù…Ù…ØªØ§Ø² Ù„Ø¨Ø¯Ø§ÙŠØ© Ù‡Ø§Ø¯Ø¦Ø©: Ø¬Ù„Ø³Ø© ØªØ±ÙƒÙŠØ² Ù‚ØµÙŠØ±Ø© + Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©.",
      4: "Ù…Ø²Ø§Ø¬ Ø¬ÙŠØ¯! Ø§Ø³ØªØºÙ„Ù‘Ù‡ ÙÙŠ Ø´ÙŠØ¡ Ù…Ù‡Ù…ØŒ Ù…Ùˆ ÙƒÙ„Ù‡ Ø³ÙˆØ´Ø§Ù„ Ù…ÙŠØ¯ÙŠØ§. Ø£Ø¹Ø·Ù Ù†ÙØ³Ùƒ Ù…ÙƒØ§ÙØ£Ø© ØµØºÙŠØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø².",
      5: "Ù…Ø²Ø§Ø¬ Ø¹Ø§Ù„ÙŠ! Ù„Ø§ ØªØ­Ø±Ù‚ Ù†ÙØ³Ùƒâ€¦ Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ø£Ù‡Ù… Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø¨Ø¯Ù„ Ù…Ø§ ØªÙØªØ­ Ù…Ù„ÙŠÙˆÙ† Ù…Ù‡Ù…Ø© Ù…Ø¹Ø§Ù‹."
    },
    en: {
      1: "You seem really drained today. Lower the pressure, take a small break, and talk to someone you trust if you can.",
      2: "The day feels heavy. Pick just ONE small task and finish it so the day doesnâ€™t feel completely wasted.",
      3: "Average mood. Perfect for a simple start: one short focus session + one real task.",
      4: "Good mood! Use it on something that matters, not only scrolling. Give yourself a small reward after.",
      5: "Great mood! Donâ€™t burn yourself out â€“ focus on the most important things instead of opening a hundred tasks."
    }
  };

  const state = {
    lang: "ar",
    timerSeconds: 25 * 60,
    timerInterval: null,
    timerRunning: false,
    focusTodayCount: 0,
    focusTotalCount: 0
  };

  // ---------- Helpers ----------
  function formatTime(sec) {
    const m = Math.floor(sec / 60)
      .toString()
      .padStart(2, "0");
    const s = (sec % 60).toString().padStart(2, "0");
    return m + ":" + s;
  }

  function updateTimerDisplay() {
    document.getElementById("timer-display").textContent = formatTime(
      state.timerSeconds
    );
  }

  function loadFocusCounts() {
    const total = Number(localStorage.getItem("ATLAS_focus_total") || "0");
    const todayDate = new Date().toISOString().slice(0, 10);
    const storedDate = localStorage.getItem("ATLAS_focus_today_date");
    let todayCount = 0;
    if (storedDate === todayDate) {
      todayCount = Number(localStorage.getItem("ATLAS_focus_today") || "0");
    } else {
      localStorage.setItem("ATLAS_focus_today_date", todayDate);
      localStorage.setItem("ATLAS_focus_today", "0");
    }
    state.focusTotalCount = isNaN(total) ? 0 : total;
    state.focusTodayCount = isNaN(todayCount) ? 0 : todayCount;
  }

  function saveFocusCounts() {
    localStorage.setItem("ATLAS_focus_total", String(state.focusTotalCount));
    localStorage.setItem("ATLAS_focus_today", String(state.focusTodayCount));
    localStorage.setItem(
      "ATLAS_focus_today_date",
      new Date().toISOString().slice(0, 10)
    );
  }

  function updateFocusCountUI() {
    document.getElementById("focus-today-count").textContent =
      state.focusTodayCount;
    document.getElementById("focus-total-count").textContent =
      state.focusTotalCount;
    document.getElementById("counter-total").textContent =
      state.focusTotalCount;
  }

  function pickRandomTip() {
    const arr = focusTips[state.lang] || [];
    if (!arr.length) return "";
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function setLanguage(lang) {
    state.lang = lang;
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";

    document.querySelectorAll(".lang-btn").forEach((btn) => {
      btn.classList.toggle("active", btn.dataset.lang === lang);
    });

    const dict = I18N[lang];
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      if (dict[key]) el.textContent = dict[key];
    });

    document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
      const key = el.getAttribute("data-i18n-placeholder");
      if (dict[key]) el.setAttribute("placeholder", dict[key]);
    });

    // Multi-line fields (innerText so \n works)
    document.getElementById("focus-tip-text").innerText = pickRandomTip();
    document.getElementById("study-output").innerText = "";
    document.getElementById("how-text").innerText =
      lang === "ar"
        ? "1. Ø§Ø®ØªØ± Ø¬Ù„Ø³Ø© ØªØ±ÙƒÙŠØ² ÙˆØ§Ø´ØªØºÙ„ Ø¨Ù„Ø§ Ù…Ø´ØªØªØ§Øª.\n2. Ø§ÙƒØªØ¨ 3 Ù…Ù‡Ø§Ù… Ù…Ù‡Ù…Ø© ÙÙ‚Ø· Ù„Ù„ÙŠÙˆÙ….\n3. Ø­Ø¯Ù‘Ø¯ Ù…Ø²Ø§Ø¬Ùƒ ÙˆØ´ÙˆÙ Ø§Ù„Ù†ØµÙŠØ­Ø©.\n4. Ø³Ø¬Ù‘Ù„ Ø£ÙŠ ÙÙƒØ±Ø© ÙÙŠ Ø§Ù„Ù†ÙˆØªØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ØªØ±ÙƒÙ‡Ø§ ØªØ²Ø¹Ø¬Ùƒ ÙÙŠ Ø±Ø£Ø³Ùƒ."
        : "1. Start a focus session with no distractions.\n2. Write only 3 important tasks for today.\n3. Set your mood and read the note.\n4. Put any thoughts into the note instead of keeping them in your head.";

    document.querySelector("[data-i18n='stats_text']").innerText =
      dict["stats_text"];
    document.querySelector("[data-i18n='future_text']").innerText =
      dict["future_text"];

    // Update mood text & focus status for current lang
    updateMoodText();
    if (!state.timerRunning) {
      document.getElementById("focus-status").textContent =
        dict["focus_status_idle"];
    }

    localStorage.setItem("ATLAS_lang", lang);
  }

  // ---------- TIMER ----------
  function startTimer() {
    if (state.timerRunning) return;
    const inp = document.getElementById("focus-minutes");
    let mins = Number(inp.value);
    if (isNaN(mins) || mins < 5) mins = 5;
    if (mins > 180) mins = 180;
    inp.value = mins;
    if (state.timerSeconds <= 0 || state.timerSeconds === 25 * 60) {
      state.timerSeconds = mins * 60;
    }
    state.timerRunning = true;
    document.getElementById("focus-status").textContent =
      state.lang === "ar"
        ? "Ø¬Ù„Ø³Ø© Ø´ØºÙ‘Ø§Ù„Ø©â€¦ Ø®Ù„ÙŠÙƒ Ù…Ø¹ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙ‚Ø·."
        : "Session runningâ€¦ stay with just this one task.";
    state.timerInterval = setInterval(() => {
      state.timerSeconds -= 1;
      if (state.timerSeconds <= 0) {
        clearInterval(state.timerInterval);
        state.timerInterval = null;
        state.timerSeconds = 0;
        state.timerRunning = false;
        updateTimerDisplay();
        onTimerFinished();
      } else {
        updateTimerDisplay();
      }
    }, 1000);
  }

  function pauseTimer() {
    if (!state.timerRunning) return;
    clearInterval(state.timerInterval);
    state.timerInterval = null;
    state.timerRunning = false;
    document.getElementById("focus-status").textContent =
      state.lang === "ar"
        ? "Ø§Ù„Ø¬Ù„Ø³Ø© Ù…ÙˆÙ‚ÙˆÙØ© Ù…Ø¤Ù‚ØªØ§Ù‹ØŒ ØªÙ‚Ø¯Ø± ØªÙƒÙ…Ù„ Ù„Ù…Ø§ ØªÙƒÙˆÙ† Ø¬Ø§Ù‡Ø²."
        : "Session paused â€“ you can continue when youâ€™re ready.";
  }

  function resetTimer() {
    clearInterval(state.timerInterval);
    state.timerInterval = null;
    state.timerRunning = false;
    const mins = Number(document.getElementById("focus-minutes").value) || 25;
    state.timerSeconds = mins * 60;
    updateTimerDisplay();
    document.getElementById("focus-status").textContent =
      I18N[state.lang]["focus_status_idle"];
  }

  function onTimerFinished() {
    state.focusTotalCount += 1;
    state.focusTodayCount += 1;
    saveFocusCounts();
    updateFocusCountUI();
    document.getElementById("focus-status").textContent =
      state.lang === "ar"
        ? "Ø£Ø­Ø³Ù†Øª! Ø®Ù„ØµØª Ø¬Ù„Ø³Ø© ØªØ±ÙƒÙŠØ² ÙƒØ§Ù…Ù„Ø© ğŸ‘ Ø®Ø° Ø¯Ù‚ÙŠÙ‚Ø© Ø±Ø§Ø­Ø© Ù‚Ø¨Ù„ Ù…Ø§ ØªØ¨Ø¯Ø£ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©."
        : "Nice! You finished a full focus session ğŸ‘ Take a short break before the next one.";
    alert(
      state.lang === "ar"
        ? "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©! Ø£Ø­Ø³Ù†Øª âœ¨"
        : "Session finished! Well done âœ¨"
    );
  }

  // ---------- TASKS ----------
  let tasks = [];

  function loadTasks() {
    try {
      const raw = localStorage.getItem("ATLAS_tasks_v1");
      tasks = raw ? JSON.parse(raw) : [];
    } catch (e) {
      tasks = [];
    }
  }

  function saveTasks() {
    localStorage.setItem("ATLAS_tasks_v1", JSON.stringify(tasks));
  }

  function renderTasks() {
    const list = document.getElementById("task-list");
    list.innerHTML = "";
    if (!tasks.length) return;
    tasks.forEach((t, idx) => {
      const item = document.createElement("div");
      item.className = "task-item";

      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.checked = !!t.done;
      cb.addEventListener("change", () => {
        t.done = cb.checked;
        saveTasks();
        renderTasks();
      });

      const span = document.createElement("div");
      span.className = "task-text" + (t.done ? " done" : "");
      span.textContent = t.text;

      const del = document.createElement("button");
      del.className = "task-del";
      del.textContent = "âœ•";
      del.addEventListener("click", () => {
        tasks.splice(idx, 1);
        saveTasks();
        renderTasks();
      });

      item.appendChild(cb);
      item.appendChild(span);
      item.appendChild(del);
      list.appendChild(item);
    });
  }

  function addTaskFromInput() {
    const input = document.getElementById("task-input");
    const txt = input.value.trim();
    if (!txt) return;
    tasks.push({ text: txt, done: false });
    input.value = "";
    saveTasks();
    renderTasks();
  }

  // ---------- STUDY PLAN ----------
  function generateStudyPlan() {
    const name = document.getElementById("exam-name").value.trim();
    const dateStr = document.getElementById("exam-date").value;
    const hours = Number(
      document.getElementById("study-hours").value || "3"
    );
    const out = document.getElementById("study-output");

    if (!dateStr) {
      out.textContent =
        state.lang === "ar"
          ? "Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø£ÙˆÙ„Ø§Ù‹."
          : "Please choose the exam date first.";
      return;
    }

    const examDate = new Date(dateStr + "T00:00:00");
    const today = new Date();
    today.setHours(0, 0, 0, 0);

    const diffMs = examDate - today;
    const days = Math.ceil(diffMs / (1000 * 60 * 60 * 24));

    if (days <= 0) {
      out.textContent =
        state.lang === "ar"
          ? "ÙŠØ¨Ø¯Ùˆ Ø£Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙŠÙˆÙ… Ø£Ùˆ Ù…Ø¶Ù‰ Ø¨Ø§Ù„ÙØ¹Ù„."
          : "It looks like the exam is today or already passed.";
      return;
    }

    const lang = state.lang;
    if (lang === "ar") {
      out.textContent =
        "Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†: " +
        (name || "Ø§Ù…ØªØ­Ø§Ù†Ùƒ") +
        "\n" +
        "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹: " +
        days +
        " ÙŠÙˆÙ….\n" +
        "Ù„Ùˆ Ø¯Ø±Ø³Øª " +
        hours +
        " Ø³Ø§Ø¹Ø© ÙÙŠ Ø§Ù„ÙŠÙˆÙ…:\n" +
        "- Ø§Ø¬Ø¹Ù„ Ø£ÙˆÙ„ " +
        (Math.max(1, Math.floor(days * 0.4))) +
        " ÙŠÙˆÙ… Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª.\n" +
        "- Ù…Ù†ØªØµÙ Ø§Ù„Ø£ÙŠØ§Ù… Ù„Ù„ØªØ¯Ø±ÙŠØ¨Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø©.\n" +
        "- Ø¢Ø®Ø± " +
        Math.max(1, Math.floor(days * 0.2)) +
        " ÙŠÙˆÙ… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© ÙˆØ§Ù„Ù†ÙˆÙ… Ø§Ù„Ø¬ÙŠØ¯.";
    } else {
      out.textContent =
        "Exam: " +
        (name || "your exam") +
        "\n" +
        "Time left: about " +
        days +
        " days.\n" +
        "If you study " +
        hours +
        " hours per day:\n" +
        "- First " +
        (Math.max(1, Math.floor(days * 0.4))) +
        " days â†’ review basics.\n" +
        "- Middle days â†’ practice questions.\n" +
        "- Last " +
        Math.max(1, Math.floor(days * 0.2)) +
        " days â†’ light revision + good sleep.";
    }
  }

  // ---------- MOOD ----------
  function updateMoodText() {
    const slider = document.getElementById("mood-slider");
    const level = Number(slider.value);
    document.getElementById("mood-level-label").textContent =
      level + " / 5";
    const text =
      (moodTexts[state.lang] &&
        moodTexts[state.lang][level]) ||
      "";
    document.getElementById("mood-advice-text").textContent = text;
  }

  // ---------- NOTES ----------
  function initNotes() {
    const key = "ATLAS_notes_v1";
    const ta = document.getElementById("notes-input");
    const saved = localStorage.getItem(key);
    if (saved) ta.value = saved;
    const status = document.getElementById("notes-status");

    function updateStatus() {
      status.textContent =
        state.lang === "ar"
          ? "ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø·."
          : "Saved automatically on this browser only.";
    }

    ta.addEventListener("input", () => {
      localStorage.setItem(key, ta.value);
      updateStatus();
    });

    updateStatus();
  }

  // ---------- SECTIONS NAV ----------
  function showSection(id) {
    document.querySelectorAll(".section").forEach((sec) => {
      sec.classList.toggle("active", sec.id === "section-" + id);
    });
    document.querySelectorAll(".nav-btn").forEach((btn) => {
      btn.classList.toggle("active", btn.dataset.sectionBtn === id);
    });
  }

  // ---------- INIT ----------
  document.addEventListener("DOMContentLoaded", () => {
    // load language
    const storedLang = localStorage.getItem("ATLAS_lang");
    if (storedLang && (storedLang === "ar" || storedLang === "en")) {
      state.lang = storedLang;
    }
    loadFocusCounts();
    updateFocusCountUI();
    updateTimerDisplay();

    // Lang buttons
    document.querySelectorAll(".lang-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        if (btn.dataset.lang === state.lang) return;
        setLanguage(btn.dataset.lang);
      });
    });

    // Nav buttons
    document.querySelectorAll(".nav-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        showSection(btn.dataset.sectionBtn);
      });
    });

    // Timer buttons
    document.getElementById("btn-start").addEventListener("click", startTimer);
    document.getElementById("btn-pause").addEventListener("click", pauseTimer);
    document.getElementById("btn-reset").addEventListener("click", resetTimer);
    document.querySelectorAll("[data-preset]").forEach((btn) => {
      btn.addEventListener("click", () => {
        const mins = Number(btn.getAttribute("data-preset"));
        const inp = document.getElementById("focus-minutes");
        inp.value = mins;
        state.timerSeconds = mins * 60;
        updateTimerDisplay();
      });
    });
    document.getElementById("btn-new-tip").addEventListener("click", () => {
      document.getElementById("focus-tip-text").innerText = pickRandomTip();
    });

    // Tasks
    loadTasks();
    renderTasks();
    document
      .getElementById("btn-add-task")
      .addEventListener("click", addTaskFromInput);
    document
      .getElementById("task-input")
      .addEventListener("keydown", (e) => {
        if (e.key === "Enter") addTaskFromInput();
      });

    // Study plan
    document
      .getElementById("btn-generate-plan")
      .addEventListener("click", generateStudyPlan);

    // Mood
    document
      .getElementById("mood-slider")
      .addEventListener("input", updateMoodText);

    // Notes
    initNotes();

    // finally set language
    setLanguage(state.lang);
    updateMoodText();
  });
</script>
</body>
</html>
